(this["webpackJsonpreact-web-audio-graph"]=this["webpackJsonpreact-web-audio-graph"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"6fe4cbeb7216dd5f91c3.worklet.js"},function(e,t,n){e.exports=n.p+"3c60d6738f1135879fc6.worklet.js"},function(e,t,n){e.exports=n.p+"d7691c746ba495f49384.worklet.js"},function(e,t,n){e.exports=n.p+"ee2ccda5b07e710428d9.worklet.js"},function(e,t,n){e.exports=n.p+"7609024a0dfa6519ee36.worklet.js"},function(e,t,n){e.exports=n.p+"bb20777439c70ae891d8.worklet.js"},function(e,t,n){e.exports=n.p+"f6855cba3f25275ae3e9.worklet.js"},function(e,t,n){e.exports=n.p+"64d1892a3999c7d09079.worklet.js"},function(e,t,n){e.exports=n.p+"3e046540000f010da2f7.worklet.js"},function(e,t,n){e.exports=n.p+"2fd20acac10a566f9a75.worklet.js"},function(e,t,n){e.exports=n.p+"0d5b39bea6f7ad721ba4.worklet.js"},function(e,t,n){e.exports=n.p+"b90471baecaa5b3e21eb.worklet.js"},function(e,t,n){e.exports=n.p+"5fec77c4657f1a14234a.worklet.js"},function(e,t,n){e.exports=n.p+"47be22378c03e68e41b9.worklet.js"},,,,,,,,,function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n.n(c),i=n(12),r=n.n(i),u=(n(39),n(4)),s=n(3),l=n(8),d=n(6),f=n.n(d),j=n(7),p=Object(c.createContext)(null);var b=n(17),m=n.n(b),v=n(18),h=n.n(v),O=n(19),x=n.n(O),g=n(20),y=n.n(g),N=n(21),C=n.n(N),k=n(22),w=n.n(k),T=n(23),A=n.n(T),M=n(24),E=n.n(M),S=n(25),_=n.n(S),R=n(26),D=n.n(R),W=n(27),F=n.n(W),B=n(28),q=n.n(B),G=n(29),P=n.n(G),L=n(30),I=n.n(L);var H=function(e){var t=e.children,n=Object(c.useState)(!1),o=Object(u.a)(n,2),i=o[0],r=o[1],s=Object(c.useMemo)((function(){try{return window.AudioContext||(window.AudioContext=window.webkitAudioContext),new window.AudioContext}catch(e){}}),[]);Object(c.useEffect)((function(){var e=function(){var e=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.audioWorklet.addModule(m.a),t.audioWorklet.addModule(h.a),t.audioWorklet.addModule(x.a),t.audioWorklet.addModule(y.a),t.audioWorklet.addModule(C.a),t.audioWorklet.addModule(w.a),t.audioWorklet.addModule(A.a),t.audioWorklet.addModule(E.a),t.audioWorklet.addModule(_.a),t.audioWorklet.addModule(D.a),t.audioWorklet.addModule(F.a),t.audioWorklet.addModule(q.a),t.audioWorklet.addModule(P.a),t.audioWorklet.addModule(I.a)]);case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();s&&e(s)}),[s]);var l=Object(c.useCallback)((function(){"suspended"===(null===s||void 0===s?void 0:s.state)&&s.resume()}),[s]);return s?i?Object(a.jsx)("div",{onClick:l,children:Object(a.jsx)(p.Provider,{value:s,children:t})}):null:Object(a.jsx)("div",{children:"Sorry, but the Web Audio API is not supported by your browser."})},z=n(2),Q=Object(c.createContext)(null);function X(){return Object(c.useContext)(Q)}var K=n(50);var J=function(e){var t=e.children,n=o.a.useState(null),i=Object(u.a)(n,2),r=i[0],s=i[1],l=o.a.useState(),d=Object(u.a)(l,2),f=d[0],j=d[1],p=Object(c.useRef)(),b=Object(K.a)(p.current,f,{placement:"bottom-start"}),m=b.styles,v=b.attributes,h=Object(c.useMemo)((function(){return{getRect:function(){return null==p.current?{top:0,left:0,right:0,bottom:0,width:0,height:0}:p.current.getBoundingClientRect()},hide:function(){s(null)},show:function(e){s(e)},setRect:function(e){p.current={getBoundingClientRect:function(){return e}}},setPopperElement:j}}),[]);return Object(a.jsxs)(Q.Provider,{value:h,children:[t,Object(a.jsx)("div",Object(z.a)(Object(z.a)({ref:function(e){return e&&j(e)},style:m.popper},v.popper),{},{children:r}))]})},U=n(10),V=n(51),Y=n(5);function Z(e){var t,n,a,c,o,i,r,u;ce(e)?(null===(t=e.input)||void 0===t||null===(n=t.stop)||void 0===n||n.call(t),null===(a=e.output)||void 0===a||null===(c=a.stop)||void 0===c||c.call(a),null===(o=e.input)||void 0===o||o.disconnect(),null===(i=e.output)||void 0===i||i.disconnect()):(null===(r=(u=e).stop)||void 0===r||r.call(u),e.disconnect(),e instanceof AudioWorkletNode&&e.port.postMessage("stop"))}var $=function(e){var t=e.children,n=Object(c.useRef)({}),o=Object(c.useMemo)((function(){return{addNode:function(e,t){n.current[e]=t},getNode:function(e){return n.current[e]},nodes:n.current,removeNode:function(e){Z(n.current[e]),delete n.current[e]}}}),[]);return Object(a.jsx)("div",{children:Object(a.jsx)(oe.Provider,{value:o,children:t})})};function ee(e){var t,n;return+(null!==(t=null===(n=e.match(/-(\d+)$/))||void 0===n?void 0:n[1])&&void 0!==t?t:0)}function te(e,t){if(!e.source||!e.target||!e.sourceHandle||!e.targetHandle)throw new Error("Invalid connection");var n=e.targetHandle.startsWith("input"),a=e.sourceHandle.startsWith("output"),c=t(e.source),o=t(e.target);if(ce(c)&&a){if(!c.output)throw new Error("Invalid connection");c=c.output}if(ce(o)&&n){if(!o.input)throw new Error("Invalid connection");o=o.input}if(!c||!o)throw new Error("Invalid connection");return{inputIndex:n?ee(e.targetHandle):void 0,outputIndex:ee(e.sourceHandle),source:a?c:c[e.sourceHandle],target:n?o:o[e.targetHandle]}}function ne(e,t){try{var n=te(e,t),a=n.inputIndex,c=n.outputIndex,o=n.source,i=n.target;null!=a?o.connect(i,c,a):o.connect(i,c)}catch(r){console.error(r)}}function ae(e,t){try{var n=te(e,t),a=n.inputIndex,c=n.outputIndex,o=n.source,i=n.target;null!=a?o.disconnect(i,c,a):o.disconnect(i,c)}catch(r){console.error(r)}}function ce(e){return e&&"input"in e&&"output"in e}var oe=Object(c.createContext)(null);function ie(){return Object(c.useContext)(oe)}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=Object(c.useContext)(p),o=ie(),i=o.addNode,r=o.getNode,u=o.removeNode,l=Object(s.k)((function(e){return e.edges})),d=Object(c.useMemo)((function(){return t(a)}),n);return Object(c.useEffect)((function(){i(e,d);var t=l.filter((function(t){return t.source===e||t.target===e}));return t.forEach((function(e){return ne(e,r)})),function(){t.forEach((function(e){return ae(e,r)})),u(e)}}),[i,r,d,e,u]),d}var ue=n(11),se=Object(c.createContext)(null);function le(){return Object(c.useContext)(se)}function de(e){var t=e.children,n=e.id,o=e.inputs,i=e.outputs,r=e.title,u=e.type,l=Object(ue.a)(e,["children","id","inputs","outputs","title","type"]),d=le(),f=d.elements,j=d.onChangeElementFactory,p=d.setElements,b=X(),m=f.find((function(e){return e.id===n})),v=Object(c.useMemo)((function(){return{background:"#".concat(n.substr(-6))}}),[n]),h=Object(c.useCallback)((function(){if(!m)throw new Error("Node does not exist - this should never happen");var e="".concat(u,"-").concat(Object(V.a)()),t=j(e),n={id:e,data:Object(z.a)(Object(z.a)({},m.data),{},{onChange:t}),type:m.type,position:{x:m.position.x+jn,y:m.position.y+jn}};p((function(e){return[].concat(Object(U.a)(e),[n])})),b.hide()}),[b,j,m,p,u]),O=Object(c.useCallback)((function(){b.hide()}),[b]),x=Object(c.useCallback)((function(e){e.preventDefault(),b.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),b.show(Object(a.jsx)("ul",{className:"contextMenu",children:Object(a.jsx)("li",{onClick:h,children:"Clone"})}))}),[h,b]);return Object(a.jsxs)("div",Object(z.a)(Object(z.a)({className:"customNode",title:n,onClick:O,onContextMenu:x},l),{},{children:[Object(a.jsx)("div",{className:"customNode_header",children:null!==r&&void 0!==r?r:u}),Object(a.jsxs)("div",{className:"customNode_body",children:[o&&Object(a.jsx)("div",{className:"customNode_inputs",children:o.map((function(e){return Object(a.jsxs)("div",{className:"customNode_item",children:[Object(a.jsx)(s.c,{id:e,position:s.d.Left,style:v,type:"target"}),e]},e)}))}),i&&Object(a.jsx)("div",{className:"customNode_outputs",children:i.map((function(e){return Object(a.jsxs)("div",{className:"customNode_item",children:[Object(a.jsx)(s.c,{id:e,position:s.d.Right,style:v,type:"source"}),e]},e)}))})]}),t]}))}var fe,je,pe,be=o.a.memo(de);function me(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.attackTime,u=void 0===r?.2:r,s=t.decayTime,l=void 0===s?.1:s,d=t.mode,f=void 0===d?fe.Linear:d,j=t.onChange,p=t.releaseTime,b=void 0===p?.6:p,m=t.sustainLevel,v=void 0===m?.7:m,h=t.sustainOn,O=void 0===h||h,x=re(n,(function(e){var t,n=new AudioWorkletNode(e,"adsr-processor",{processorOptions:{sustainOn:O,mode:f}});return t={},Object(Y.a)(t,je.AttackTime,n.parameters.get(je.AttackTime)),Object(Y.a)(t,je.DecayTime,n.parameters.get(je.DecayTime)),Object(Y.a)(t,"gain",n),Object(Y.a)(t,"gate",n),Object(Y.a)(t,"input",void 0),Object(Y.a)(t,"output",void 0),Object(Y.a)(t,je.ReleaseTime,n.parameters.get(je.ReleaseTime)),Object(Y.a)(t,je.SustainLevel,n.parameters.get(je.SustainLevel)),t}),[f,O]);return Object(c.useEffect)((function(){x[je.AttackTime].value=u}),[x,u]),Object(c.useEffect)((function(){x[je.DecayTime].value=l}),[x,l]),Object(c.useEffect)((function(){x[je.ReleaseTime].value=b}),[x,b]),Object(c.useEffect)((function(){x[je.SustainLevel].value=v}),[x,v]),Object(a.jsx)(be,{id:n,inputs:["gate",je.AttackTime,je.DecayTime,je.ReleaseTime,je.SustainLevel],outputs:["gain"],title:"ADSR",type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("select",{onChange:function(e){return j({mode:e.target.value})},title:"Type",value:f,children:[Object(a.jsx)("option",{value:fe.Exponential,children:fe.Exponential}),Object(a.jsx)("option",{value:fe.Linear,children:fe.Linear}),Object(a.jsx)("option",{value:fe.Logarithmic,children:fe.Logarithmic})]})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{checked:O,onChange:function(){return j({sustainOn:!O})},title:"Sustain",type:"checkbox"}),"sustain on"]})}),Object(a.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(a.jsx)("input",{min:0,onChange:function(e){return j({attackTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Attack time",type:"number",value:u}),Object(a.jsx)("input",{min:0,onChange:function(e){return j({decayTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Decay time",type:"number",value:l})]}),Object(a.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(a.jsx)("input",{min:0,onChange:function(e){return j({releaseTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Release time",type:"number",value:b}),Object(a.jsx)("input",{max:1,min:0,onChange:function(e){return j({sustainLevel:+e.target.value})},step:.01,style:{width:"50%"},title:"Sustain level",type:"number",value:v})]})]})})}!function(e){e.Exponential="Exponential",e.Linear="Linear",e.Logarithmic="Logarithmic"}(fe||(fe={})),function(e){e.AttackTime="attack",e.DecayTime="decay",e.ReleaseTime="release",e.SustainLevel="sustain"}(je||(je={})),function(e){e.Attack="Attack",e.Decay="Decay",e.Release="Release",e.Sustain="Sustain"}(pe||(pe={}));var ve=o.a.memo(me);function he(e,t){var n=Object(c.useRef)(),a=Object(c.useRef)(),o=null===t||void 0===t?void 0:t.maxFPS,i=Object(c.useCallback)((function(t){if(null!=n.current){var c=t-n.current;(!o||c>1e3/o)&&(e(c),n.current=t)}else e(0),n.current=t;a.current=requestAnimationFrame(i)}),[e]);Object(c.useEffect)((function(){return a.current=requestAnimationFrame(i),function(){null!=a.current&&cancelAnimationFrame(a.current)}}),[i])}function Oe(e){var t=e.node,n=e.paused,o=e.type,i=Object(ue.a)(e,["node","paused","type"]),r=Object(c.useRef)(new Uint8Array(t.frequencyBinCount)),u=Object(c.useRef)(null),s=Object(c.useCallback)((function(){var e=u.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&(o===xe.TimeDomain?function(e,t){var n=0,a=e.canvas.height,c=e.canvas.width,o=t.length,i=c/o;e.fillStyle="#001400",e.fillRect(0,0,c,256),e.lineWidth=2,e.strokeStyle="#00c800",e.beginPath(),e.moveTo(n,a-t[0]/128*a/2);for(var r=1;r<o;r++){var u=t[r]/128*a/2;e.lineTo(n,a-u),n+=i}e.stroke()}(t,r.current):o===xe.Frequency&&function(e,t){var n=0,a=e.canvas.height,c=e.canvas.width,o=t.length,i=c/o;e.fillStyle="#001400",e.fillRect(0,0,c,a),e.fillStyle="#00c800";for(var r=0;r<o;r++){var u=a*(t[r]/255),s=a-u;e.fillRect(n,s,i,u),n+=i}}(t,r.current))}),[o]),l=Object(c.useCallback)((function(){var e=t.frequencyBinCount,n=new Uint8Array(e);o===xe.TimeDomain?t.getByteTimeDomainData(n):o===xe.Frequency&&t.getByteFrequencyData(n),r.current=n}),[t,o]);return he(Object(c.useCallback)((function(){n||(l(),s())}),[s,l,n])),Object(a.jsx)("canvas",Object(z.a)({ref:u,style:{display:"block"}},i))}var xe,ge=o.a.memo(Oe);function ye(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.fftSizeExp,u=void 0===r?11:r,s=t.onChange,l=t.paused,d=void 0!==l&&l,f=t.type,j=void 0===f?xe.TimeDomain:f,p=re(n,(function(e){return e.createAnalyser()}));return Object(c.useEffect)((function(){p.fftSize=Math.pow(2,u)}),[p,u]),Object(a.jsxs)(be,{id:n,inputs:["input","fftSize"],outputs:["output"],title:"Analyser: ".concat(j),type:i,children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)(ge,{type:j,node:p,paused:d,height:64,width:256})}),o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsxs)("div",{className:"customNode_item",children:[Object(a.jsx)("input",{type:"range",max:"15",min:"5",onChange:function(e){return s({fftSizeExp:+e.target.value})},step:1,value:u}),Math.pow(2,u)]}),Object(a.jsxs)("div",{className:"customNode_item",style:{justifyContent:"space-between"},children:[Object(a.jsxs)("select",{onChange:function(e){return s({type:e.target.value})},title:"Type",value:j,children:[Object(a.jsx)("option",{value:xe.Frequency,children:xe.Frequency}),Object(a.jsx)("option",{value:xe.TimeDomain,children:xe.TimeDomain})]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{checked:d,onChange:function(e){return s({paused:!d})},title:"Pause",type:"checkbox"}),"Paused"]})]})]})]})}!function(e){e.Frequency="Frequency",e.TimeDomain="Time Domain"}(xe||(xe={}));var Ne=o.a.memo(ye);function Ce(e){var t=e.id,n=e.type;return re(t,(function(e){return new AudioWorkletNode(e,"and-gate-processor",{numberOfInputs:2})})),Object(a.jsx)(be,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: AND",type:n})}var ke=o.a.memo(Ce);function we(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.loop,u=void 0===r||r,s=t.onChange,l=Object(c.useRef)(),d=re(n,(function(e){return e.createGain()})),p=Object(c.useCallback)((function(e){var t;null===(t=l.current)||void 0===t||t.disconnect(),l.current=e,l.current.connect(d)}),[d]),b=Object(c.useCallback)((function(){if(l.current){var e=d.context.createBufferSource();e.buffer=l.current.buffer,e.loop=u,p(e),l.current.start()}}),[d,u,p]),m=Object(c.useCallback)((function(){try{var e;null===(e=l.current)||void 0===e||e.stop()}catch(t){}}),[]),v=Object(c.useCallback)(function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.context.createBufferSource(),e.t0=d.context,e.next=4,t.arrayBuffer();case 4:return e.t1=e.sent,e.next=7,e.t0.decodeAudioData.call(e.t0,e.t1);case 7:n.buffer=e.sent,n.loop=u,p(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,u,p]),h=Object(c.useCallback)((function(e){e.preventDefault(),v(e.target.files[0])}),[v]),O=Object(c.useCallback)((function(e){e.preventDefault()}),[]),x=Object(c.useCallback)(function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Object(U.a)(t.dataTransfer.items).filter((function(e){return"file"===e.kind}))[0].getAsFile(),v(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v]);return Object(a.jsx)(be,{id:n,outputs:["output"],title:"Buffer Source",type:i,onDragOver:O,onDrop:x,children:Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsxs)("div",{className:"customNode_item",children:[Object(a.jsx)("button",{onClick:b,children:"Play"}),Object(a.jsx)("button",{onClick:m,children:"Stop"})]}),o&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{onChange:h,type:"file"})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{checked:u,onChange:function(){return s({loop:!u})},title:"Loop",type:"checkbox"}),"Loop"]})})]})]})})}var Te,Ae=o.a.memo(we);function Me(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.detune,u=void 0===r?0:r,s=t.gain,l=void 0===s?0:s,d=t.frequency,f=void 0===d?350:d,j=t.Q,p=void 0===j?1:j,b=t.onChange,m=t.type,v=void 0===m?Te.lowpass:m,h=Object(c.useRef)(null),O=re(n,(function(e){return e.createBiquadFilter()}));Object(c.useEffect)((function(){O.detune.value=u}),[O,u]),Object(c.useEffect)((function(){O.frequency.value=f}),[O,f]),Object(c.useEffect)((function(){O.gain.value=l}),[O,l]),Object(c.useEffect)((function(){O.Q.value=p}),[O,p]),Object(c.useEffect)((function(){O.type=v}),[O,v]),Object(c.useEffect)((function(){var e=h.current,t=null===e||void 0===e?void 0:e.getContext("2d");if(e&&t){var n=new Float32Array(O.context.sampleRate/200).map((function(e,t){return 100*t})),a=new Float32Array(n.length),c=new Float32Array(n.length);O.getFrequencyResponse(n,a,c),function(e,t,n){var a=0,c=e.canvas.height,o=e.canvas.width,i=t.length,r=o/i;e.fillStyle="#001400",e.fillRect(0,0,o,c),e.lineWidth=1,e.strokeStyle="#ffffff77",e.beginPath(),e.moveTo(n.frequency.value/(n.context.sampleRate/2)*o,0),e.lineTo(n.frequency.value/(n.context.sampleRate/2)*o,c),e.stroke(),e.closePath(),e.lineWidth=2,e.strokeStyle="#00c800",e.beginPath();for(var u=0;u<i;u++){var s=t[u]*c/2;e.lineTo(a,c-s),a+=r}e.stroke()}(t,a,O)}}),[O,u,l,f,p,o,v]);var x=[Te.lowshelf,Te.highshelf,Te.peaking].includes(v),g=[Te.lowpass,Te.highpass,Te.bandpass,Te.peaking,Te.notch,Te.allpass].includes(v);return Object(a.jsx)(be,{id:n,inputs:["input","detune","frequency","gain","Q"],outputs:["output"],title:"Filter: ".concat(v),type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{min:-100,max:100,onChange:function(e){return b({detune:+e.target.value})},step:1,title:"Detune: ".concat(u," cents"),type:"range",value:u})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{min:10,max:O.context.sampleRate/2,onChange:function(e){return b({frequency:+e.target.value})},step:1,title:"Frequency: ".concat(f," Hz"),type:"range",value:f})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{disabled:!x,min:-40,max:40,onChange:function(e){return b({gain:+e.target.value})},step:.1,title:"Gain: ".concat(l," dB"),type:"range",value:l})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{disabled:!g,min:1e-4,max:[Te.lowpass,Te.highpass].includes(v)?10:1e3,onChange:function(e){return b({Q:+e.target.value})},step:[Te.lowpass,Te.highpass].includes(v)?.1:10,title:"Q: ".concat(p),type:"range",value:p})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("select",{onChange:function(e){return b({type:e.target.value})},value:v,children:Object.values(Te).map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("canvas",{ref:h,height:64,width:256})})]})})}!function(e){e.lowpass="lowpass",e.highpass="highpass",e.bandpass="bandpass",e.lowshelf="lowshelf",e.highshelf="highshelf",e.peaking="peaking",e.notch="notch",e.allpass="allpass"}(Te||(Te={}));var Ee=o.a.memo(Me),Se={2:"Stereo",4:"Quad",6:"5.1"};function _e(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.inputs,r=void 0===i?2:i,u=t.onChange,s=re(n,(function(e){return e.createChannelMerger(r)}),[r]);return Object(a.jsx)(be,{id:n,inputs:Array(s.numberOfInputs).fill(0).map((function(e,t){return"input-".concat(t)})),outputs:["output"],type:o,children:c&&Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",style:{alignItems:"flex-start",flexDirection:"column"},children:Object.keys(Se).map((function(e){return Object(a.jsxs)("label",{title:"Channel configuration",children:[Object(a.jsx)("input",{checked:r===+e,onChange:function(e){return u({inputs:+e.target.value})},type:"radio",value:+e})," ",Se[e]]},e)}))})})})}var Re=o.a.memo(_e);function De(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.onChange,r=t.outputs,u=void 0===r?2:r,s=re(n,(function(e){return e.createChannelSplitter(u)}),[u]);return Object(a.jsx)(be,{id:n,inputs:["input"],outputs:Array(s.numberOfOutputs).fill(0).map((function(e,t){return"output-".concat(t)})),type:o,children:c&&Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",style:{alignItems:"flex-start",flexDirection:"column"},children:Object.keys(Se).map((function(e){return Object(a.jsxs)("label",{title:"Channel configuration",children:[Object(a.jsx)("input",{checked:u===+e,onChange:function(e){return i({outputs:+e.target.value})},type:"radio",value:+e})," ",Se[e]]},e)}))})})})}var We=o.a.memo(De);function Fe(e){var t=e.id,n=e.type;return re(t,(function(e){return new AudioWorkletNode(e,"comparator-processor",{numberOfInputs:2})})),Object(a.jsx)(be,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Comparator",type:n})}var Be=o.a.memo(Fe);function qe(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.offset,u=void 0===r?1:r,s=t.onChange,l=re(n,(function(e){return e.createConstantSource()}));return Object(c.useEffect)((function(){return l.start(),function(){return l.stop()}}),[l]),Object(c.useEffect)((function(){return l.offset.value=u}),[l,u]),Object(a.jsx)(be,{id:n,outputs:["output"],title:"Constant: ".concat(u),type:i,children:o&&Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{onChange:function(e){return s({offset:+e.target.value})},style:{width:"100%"},title:"Offset",type:"number",value:u})})})})}var Ge=o.a.memo(qe);function Pe(e){return Math.max(.001,Math.min(179.999,e))}function Le(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.delayTime,u=void 0===r?1:r,s=t.maxDelayTime,l=void 0===s?1:s,d=t.onChange,f=re(n,(function(e){return e.createDelay(Pe(l))}),[l]);return Object(c.useEffect)((function(){f.delayTime.value=u}),[f,u]),Object(a.jsx)(be,{id:n,inputs:["input","delayTime"],outputs:["output"],title:"Delay: ".concat(u," s"),type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{max:f.delayTime.maxValue,min:f.delayTime.minValue,step:Pe(l)/10,onChange:function(e){return d({delayTime:+e.target.value})},title:"Delay: ".concat(u," s"),type:"range",value:u})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{onChange:function(e){return d({maxDelayTime:+e.target.value})},max:0,min:180,title:"Max delay",type:"number",value:Pe(l)})})]})})}var Ie,He=o.a.memo(Le);!function(e){e.Linear="Linear",e.Log="Log"}(Ie||(Ie={}));var ze=function(e){var t=e.onChange,n=e.type,o=e.value,i=Object(ue.a)(e,["onChange","type","value"]),r=.001,u=o;n===Ie.Log&&(r=9/(1/r),u=function(e){return(Math.pow(10,e)-1)/9}(u));var s=Object(c.useCallback)((function(e){var a=+e.target.value;n===Ie.Log&&(a=function(e){return Math.log10(1+9*e)}(a)),t(a)}),[t,n]);return Object(a.jsx)("input",Object(z.a)(Object(z.a)({},i),{},{type:"range",max:1,min:0,step:r,onChange:s,value:u}))};function Qe(e){return 20*Math.log10(Math.abs(e))}function Xe(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.delayTime,r=void 0===i?.2:i,u=t.feedback,s=void 0===u?.7:u,l=t.mix,d=void 0===l?.5:l,f=t.onChange;return re(n,(function(e){var t=e.createGain(),n=e.createGain(),a=e.createGain(),c=e.createGain(),o=e.createDelay(1);o.delayTime.value=r;var i=e.createGain();return i.gain.setTargetAtTime(s,i.context.currentTime,.015),a.gain.setTargetAtTime(Math.cos(.5*d*Math.PI),a.context.currentTime,.015),c.gain.setTargetAtTime(Math.cos(.5*(1-d)*Math.PI),c.context.currentTime,.015),t.connect(a),a.connect(n),t.connect(o),o.connect(c),c.connect(n),c.connect(i),i.connect(o),{input:t,output:n}}),[r,s,d]),Object(a.jsx)(be,{id:n,inputs:["input"],outputs:["output"],title:"DelayEffect",type:o,children:c&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{max:"1",min:"0",onChange:function(e){return f({mix:+e.target.value})},step:"0.01",title:"Mix: ".concat(100*(1-d),"% dry / ").concat(100*d,"% wet"),type:"range",value:d})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{max:"1",min:"0",onChange:function(e){return f({delayTime:+e.target.value})},step:"0.01",title:"Delay: ".concat(r," s"),type:"range",value:r})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)(ze,{onChange:function(e){return f({feedback:e})},title:"Feedback: ".concat(Qe(s).toFixed(2)," dB"),type:Ie.Linear,value:s})})]})})}var Ke=o.a.memo(Xe);function Je(e){var t=e.id,n=e.type;return re(t,(function(e){return e.destination})),Object(a.jsx)(be,{id:t,inputs:["input"],type:n})}var Ue=o.a.memo(Je);function Ve(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.attack,u=void 0===r?.003:r,s=t.knee,l=void 0===s?30:s,d=t.onChange,f=t.ratio,j=void 0===f?12:f,p=t.release,b=void 0===p?.25:p,m=t.threshold,v=void 0===m?-24:m,h=re(n,(function(e){return e.createDynamicsCompressor()}));return Object(c.useEffect)((function(){h.threshold.value=v}),[h,v]),Object(c.useEffect)((function(){h.knee.value=l}),[h,l]),Object(c.useEffect)((function(){h.ratio.value=j}),[h,j]),Object(c.useEffect)((function(){h.attack.value=u}),[h,u]),Object(c.useEffect)((function(){h.release.value=b}),[h,b]),Object(a.jsx)(be,{id:n,inputs:["input","threshold","knee","ratio","attack","release"],outputs:["output"],type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{min:"-100",max:"0",onChange:function(e){return d({threshold:+e.target.value})},step:"1",title:"Threshold: ".concat(v," dB"),type:"range",value:v})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{min:"0",max:"40",onChange:function(e){return d({knee:+e.target.value})},step:"1",title:"Knee: ".concat(l," dB"),type:"range",value:l})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{min:"1",max:"20",onChange:function(e){return d({ratio:+e.target.value})},step:"1",title:"Ratio: ".concat(j," dB"),type:"range",value:j})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{min:"0",max:"1",onChange:function(e){return d({attack:+e.target.value})},step:"0.001",title:"Attack: ".concat(u," s"),type:"range",value:u})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{min:"0",max:"1",onChange:function(e){return d({release:+e.target.value})},step:"0.001",title:"Release: ".concat(b," s"),type:"range",value:b})})]})})}var Ye=o.a.memo(Ve),Ze=[32,64,125,250,500,1e3,2e3,4e3,8e3,16e3];function $e(e){var t=Math.pow(2,e);return Math.sqrt(t)/(t-1)}function et(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.bandwidth,u=void 0===r?1:r,s=t.gains,d=void 0===s?Array(Ze.length).fill(0):s,f=t.onChange,j=re(n,(function(e){var t=e.createGain(),n=e.createGain(),a=Ze.map((function(t,n,a){var c=0===n,o=n===a.length-1,i=!c&&!o?d[n]:0,r=c?"lowshelf":o?"highshelf":"peaking",s=$e(u),l=e.createBiquadFilter();return l.frequency.value=t,l.gain.value=i,l.type=r,l.Q.value=s,l}));return a.concat(n).reduce((function(e,t){return e.connect(t)}),t),{filters:a,input:t,output:n}}));return Object(c.useEffect)((function(){j.filters.forEach((function(e,t){e.gain.setTargetAtTime(d[t],e.context.currentTime,.015)}))}),[j,d]),Object(c.useEffect)((function(){j.filters.forEach((function(e){e.Q.setTargetAtTime($e(u),e.context.currentTime,.015)}))}),[j,u]),Object(a.jsx)(be,{id:n,inputs:["input"],outputs:["output"],title:"EQ",type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("div",{className:"equalizer",children:j.filters.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{max:12,min:-12,onChange:function(e){return f({gains:Object(l.a)(d,(function(n){n[t]=+e.target.value}))})},step:.1,title:"Gain: ".concat(d[t]," dB"),type:"range",value:d[t]}),(n=e.frequency.value,n>=1e3?"".concat(Math.floor(n/1e3),"k"):"".concat(n))]},t);var n}))})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{max:4,min:.5,step:.5,onChange:function(e){return f({bandwidth:+e.target.value})},title:"Bandwidth: ".concat(u," octaves"),type:"range",value:u})})]})})}var tt=o.a.memo(et),nt=[{items:[{label:"Audio Buffer Source",node:"AudioBufferSource"},{label:"Gate",node:"Gate"},{label:"Keyboard",node:"Keyboard"},{label:"Metronome",node:"Metronome"},{label:"Noise",node:"Noise"},{label:"Oscillator",node:"Oscillator"},{label:"Oscillator Note",node:"OscillatorNote"}],label:"Sources"},{items:[{label:"Destination",node:"Destination"}],label:"Destinations"},{items:[{label:"Biquad Filter",node:"BiquadFilter"},{label:"Channel Merger",node:"ChannelMerger"},{label:"Channel Splitter",node:"ChannelSplitter"},{label:"Delay",node:"Delay"},{label:"Delay Effect",node:"DelayEffect"},{label:"Dynamics Compressor",node:"DynamicsCompressor"},{label:"Equalizer",node:"Equalizer"},{label:"Gain",node:"Gain"},{label:"Quantizer",node:"Quantizer"},{label:"Rectifier",node:"Rectifier"},{label:"Sample and Hold",node:"SampleAndHold"},{label:"Sign",node:"Sign"},{label:"Stereo Panner",node:"StereoPanner"},{label:"Transformer",node:"Transformer"},{label:"Wave Shaper",node:"WaveShaper"}],label:"Effects"},{items:[{label:"ADSR",node:"ADSR"},{label:"Constant Source",node:"ConstantSource"},{label:"Input Switch",node:"InputSwitch"},{label:"Output Switch",node:"OutputSwitch"}],label:"Controllers"},{items:[{label:"AND Gate",node:"AndGate"},{label:"Comparator",node:"Comparator"},{label:"NOT Gate",node:"NotGate"},{label:"OR Gate",node:"OrGate"},{label:"XOR Gate",node:"XorGate"}],label:"Logic"},{items:[{label:"Analyser",node:"Analyser"},{label:"Meter",node:"Meter"}],label:"Analysers"}];function at(e){var t=e.addNode;return Object(a.jsx)("ul",{className:"contextMenu",children:nt.map((function(e){return Object(a.jsxs)("li",{children:[e.label,Object(a.jsx)("span",{children:"\u276f"}),e.items&&Object(a.jsx)("ul",{className:"contextMenu sub",children:e.items.map((function(e){return Object(a.jsx)("li",{onClick:function(){return t(e.node)},children:e.label},e.label)}))})]},e.label)}))})}var ct=o.a.memo(at);function ot(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.gain,u=void 0===r?1:r,s=t.onChange,l=t.type,d=void 0===l?Ie.Log:l,f="Gain: ".concat(Qe(u).toFixed(2)," dB"),j=re(n,(function(e){return e.createGain()}));return Object(c.useEffect)((function(){j.gain.setTargetAtTime(u,j.context.currentTime,.015)}),[j,u]),Object(a.jsx)(be,{id:n,inputs:["input","gain"],outputs:["output"],title:f,type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)(ze,{onChange:function(e){return s({gain:e})},title:f,type:d,value:u})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("select",{onChange:function(e){return s({type:e.target.value})},title:"Type",value:d,children:[Object(a.jsx)("option",{value:Ie.Linear,children:Ie.Linear}),Object(a.jsx)("option",{value:Ie.Log,children:Ie.Log})]})})]})})}var it=o.a.memo(ot);function rt(e){var t=e.data,n=e.id,o=e.type,i=t.isOn,r=void 0!==i&&i,u=t.onChange,s=re(n,(function(e){return e.createConstantSource()}));Object(c.useEffect)((function(){return s.start(),function(){return s.stop()}}),[s]),Object(c.useEffect)((function(){s.offset.setTargetAtTime(r?1:0,s.context.currentTime,.015)}),[s,r]);var l=Object(c.useCallback)((function(e){"repeat"in e&&e.repeat||u({isOn:!0})}),[u]),d=Object(c.useCallback)((function(){return u({isOn:!1})}),[u]);return Object(a.jsx)(be,{id:n,outputs:["output"],title:"Gate",type:o,children:Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("button",{onMouseDown:l,onMouseUp:d,onKeyDown:l,onKeyUp:d,children:["trigger ",r?"off":"on"]})})})}var ut=o.a.memo(rt);var st=function(e){var t=e.checked,n=e.labelOff,c=void 0===n?"off":n,o=e.labelOn,i=void 0===o?"on":o,r=e.onChange;return Object(a.jsxs)("label",{className:"toggle",children:[Object(a.jsx)("input",{checked:t,onChange:r,type:"checkbox"}),Object(a.jsx)("span",{className:"option",children:i}),Object(a.jsx)("span",{className:"option",children:c})]})};function lt(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.input,u=void 0===r?"A":r,s=t.onChange,l=re(n,(function(e){var t=e.createGain(),n=e.createGain(),a=e.createGain();return n.connect(t),a.connect(t),{A:n,B:a,input:void 0,output:t}}));Object(c.useEffect)((function(){"A"===u?(l.A.gain.setTargetAtTime(1,l.A.context.currentTime,.015),l.B.gain.setTargetAtTime(0,l.A.context.currentTime,.015)):(l.A.gain.setTargetAtTime(0,l.A.context.currentTime,.015),l.B.gain.setTargetAtTime(1,l.A.context.currentTime,.015))}),[l,u]);var d=Object(c.useCallback)((function(){return s({input:"A"===u?"B":"A"})}),[s,u]);return Object(a.jsx)(be,{id:n,inputs:["A","B"],outputs:["output"],title:"Input: ".concat(u),type:i,children:o&&Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)(st,{checked:"A"===u,labelOff:"B",labelOn:"A",onChange:d})})})})}var dt,ft,jt=o.a.memo(lt),pt=["C","C\u266f","D","D\u266f","E","F","F\u266f","G","G\u266f","A","A\u266f","B"];function bt(e){if(e<0||e>11)throw new RangeError("Octave must be between 0 and 11, is ".concat(e))}function mt(e,t){!function(e){if(e<0||e>10)throw new RangeError("Octave must be between 0 and 10, is ".concat(e))}(e),bt(t);return 16.3516*Math.pow(2,e+t/12)}function vt(e){return bt(e),pt[e]}!function(e){e[e.Whole="\ueca2"]="Whole",e[e.Half="\ueca3"]="Half",e[e.Quarter="\ueca5"]="Quarter",e[e.Sixteenth="\ueca9"]="Sixteenth",e[e.Eight="\ueca7"]="Eight"}(dt||(dt={})),function(e){e[e.Whole=1]="Whole",e[e.Half=2]="Half",e[e.Quarter=4]="Quarter",e[e.Eight=8]="Eight",e[e.Sixteenth=16]="Sixteenth"}(ft||(ft={}));n(43);var ht="key key-black",Ot="key key-white";function xt(e){var t=e.data,n=e.id,o=e.type,i=t.octave,r=void 0===i?2:i,u=t.onChange,s=re(n,(function(e){var t=e.createConstantSource();return{frequency:e.createConstantSource(),gate:t,input:void 0,output:void 0}}));Object(c.useEffect)((function(){return s.frequency.offset.value=0,s.frequency.start(),s.gate.offset.value=0,s.gate.start(),function(){s.gate.disconnect(),s.gate.stop(),s.frequency.disconnect(),s.frequency.stop()}}),[s]);var l=Object(c.useCallback)((function(e,t){var n=s.frequency.context,a=mt(e,t);s.frequency.offset.setTargetAtTime(a,n.currentTime,.015)}),[s]),d=Object(c.useCallback)((function(){s.gate.offset.value=1}),[s]),f=Object(c.useCallback)((function(){s.gate.offset.value=0}),[s]);return Object(a.jsx)(be,{id:n,outputs:["frequency","gate"],title:"Keyboard",type:o,children:Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("div",{className:"keyboard",onMouseDown:d,onMouseLeave:f,onMouseUp:f,children:[Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r-1,9)},children:"1"}),Object(a.jsx)("button",{className:ht,onMouseEnter:function(){return l(r-1,10)},children:"2"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r-1,11)},children:"3"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r,0)},children:"4"}),Object(a.jsx)("button",{className:ht,onMouseEnter:function(){return l(r,1)},children:"5"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r,2)},children:"6"}),Object(a.jsx)("button",{className:ht,onMouseEnter:function(){return l(r,3)},children:"7"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r,4)},children:"8"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r,5)},children:"9"}),Object(a.jsx)("button",{className:ht,onMouseEnter:function(){return l(r,6)},children:"10"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r,7)},children:"11"}),Object(a.jsx)("button",{className:ht,onMouseEnter:function(){return l(r,8)},children:"12"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r,9)},children:"13"}),Object(a.jsx)("button",{className:ht,onMouseEnter:function(){return l(r,10)},children:"14"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r,11)},children:"15"}),Object(a.jsx)("button",{className:Ot,onMouseEnter:function(){return l(r+1,0)},children:"16"})]})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{min:1,max:6,onChange:function(e){return u({octave:+e.target.value})},title:"Octave",type:"number",value:r})})]})})}var gt,yt=o.a.memo(xt);var Nt=null!==(gt=window.devicePixelRatio)&&void 0!==gt?gt:1;function Ct(e,t){e.setTransform(Nt,0,0,Nt,0,0),e.fillStyle="#000000",e.font="10px Arial",e.strokeStyle="#000000",e.textAlign="right",e.textBaseline="middle",e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore(),Array(55).fill(void 0).forEach((function(t,n){var a=[0,6,12,18,30,42,54].includes(n),c=a?1:.5,o=a?6:3,i="".concat(6-n),r=2*n+5.5,u=17+(a?0:3),s=r;a&&e.fillText(i,15,s),e.lineWidth=c,e.fillRect(0+u,r+0,o,c)})),t.forEach((function(t,n){Array(55).fill(void 0).forEach((function(a,c){var o,i=6-c,r=Math.min(Math.max(120*(o=Math.max(0,-i/10),Math.log10(1+9*o)),0),120).toFixed(0),u=Qe(t)>=i?"50%":"0%";e.fillStyle="hsl(".concat(r,", 50%, ").concat(u,")"),e.fillRect(27*(n+1)-2,2*c+5,25,2)}))}))}function kt(e){var t=e.id,n=e.type,o=Object(c.useRef)(null),i=Object(c.useRef)([]),r=Object(c.useState)(1),s=Object(u.a)(r,2),l=s[0],d=s[1],f=27*(l+1),j=re(t,(function(e){return new AudioWorkletNode(e,"meter-processor",{numberOfOutputs:0})})),p=Object(c.useCallback)((function(e){var t=e.data;"channels"===t.type&&t.payload.channels!==l&&d(t.payload.channels),"level"===t.type&&(i.current[t.payload.channel]=t.payload.level)}),[l]);return Object(c.useEffect)((function(){j.port.onmessage=p}),[j,p]),he(Object(c.useCallback)((function(){var e=o.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&Ct(t,i.current.slice(0,l))}),[l])),Object(a.jsx)(be,{id:t,inputs:["input"],title:"Meter",type:n,children:Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("canvas",{ref:o,width:Nt*f,height:120*Nt,style:{height:120,width:f}})})})})}var wt=o.a.memo(kt),Tt=n(14),At=(n(44),{fontFamily:"Bravura",fontSize:20,height:32,lineHeight:2,padding:0,width:32});function Mt(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.beatsPerMeasure,u=void 0===r?4:r,s=t.beatsPerMinute,l=void 0===s?120:s,d=t.notes,f=void 0===d?[ft.Quarter]:d,j=t.onChange,p=re(n,(function(e){var t,n=60/l,a=n*u,c=e.createBuffer(1,e.sampleRate*a,e.sampleRate),o=c.getChannelData(0),i=Object(Tt.a)(f);try{for(i.s();!(t=i.n()).done;)for(var r=t.value,s=n*ft.Quarter/r,d=e.sampleRate*s,j=880*r/ft.Quarter,p=u*r/ft.Quarter,b=0,m=1,v=0;v<p;v++)for(var h=0;h<d;h++){var O=0===v?1.33*j:j,x=h+Math.floor(v*d),g=1/f.length,y=Math.min(g,h/(.015*e.sampleRate));o[x]+=Math.sin(b)*m,b+=2*Math.PI*O/e.sampleRate,m=Math.max(y-h/d,0)}}catch(C){i.e(C)}finally{i.f()}var N=e.createBufferSource();return N.buffer=c,N.loop=!0,N.loopEnd=a,N}),[u,f.length,l]);Object(c.useEffect)((function(){return p.start(),function(){return p.stop()}}),[p]);var b=Object(c.useCallback)((function(e){return j({notes:f.includes(e)?f.filter((function(t){return t!==e})):f.concat(e)})}),[f,j]);return Object(a.jsx)(be,{id:n,outputs:["output"],title:"Metronome: ".concat(l," BPM"),type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsxs)("div",{className:"customNode_item",children:[Object(a.jsx)("input",{max:208,min:40,onChange:function(e){return j({beatsPerMinute:+e.target.value})},title:"Beats Per Minute",type:"number",value:l}),Object(a.jsx)("input",{max:8,min:1,onChange:function(e){return j({beatsPerMeasure:+e.target.value})},title:"Beats Per Measure",type:"number",value:u})]}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("span",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[ft.Whole,ft.Half,ft.Quarter,ft.Eight,ft.Sixteenth].map((function(e){return Object(a.jsx)("button",{onClick:function(){return b(e)},style:Object(z.a)(Object(z.a)({},At),{},{color:f.includes(e)?"#0d0":"#d00"}),title:"".concat(ft[e]," note"),children:dt[ft[e]]},e)}))})})]})})}var Et,St=o.a.memo(Mt);function _t(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.onChange,r=t.type,u=void 0===r?Et.White:r;return re(n,(function(e){return new AudioWorkletNode(e,"noise-processor",{numberOfInputs:0,processorOptions:{type:u}})}),[u]),Object(a.jsx)(be,{id:n,outputs:["output"],title:"Noise: ".concat(u),type:o,children:c&&Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("select",{onChange:function(e){return i({type:e.target.value})},title:"Type",value:u,children:[Object(a.jsx)("option",{value:Et.White,children:Et.White}),Object(a.jsx)("option",{value:Et.Pink,children:Et.Pink}),Object(a.jsx)("option",{value:Et.Brown,children:Et.Brown})]})})})})}!function(e){e.Brown="Brown",e.Pink="Pink",e.White="White"}(Et||(Et={}));var Rt=o.a.memo(_t);function Dt(e){var t=e.id,n=e.type;return re(t,(function(e){return new AudioWorkletNode(e,"not-gate-processor")})),Object(a.jsx)(be,{id:t,inputs:["input"],outputs:["output"],title:"Gate: NOT",type:n})}var Wt=o.a.memo(Dt);function Ft(e){var t=e.id,n=e.type;return re(t,(function(e){return new AudioWorkletNode(e,"or-gate-processor",{numberOfInputs:2})})),Object(a.jsx)(be,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: OR",type:n})}var Bt=o.a.memo(Ft);function qt(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.detune,u=void 0===r?0:r,s=t.frequency,l=void 0===s?440:s,d=t.onChange,f=t.type,j=void 0===f?"sine":f,p=l*Math.pow(2,u/1200),b=re(n,(function(e){return e.createOscillator()}));return Object(c.useEffect)((function(){return b.start(),function(){return b.stop()}}),[b]),Object(c.useEffect)((function(){b.detune.value=null!==u&&void 0!==u?u:0}),[b,u]),Object(c.useEffect)((function(){b.frequency.value=null!==l&&void 0!==l?l:440}),[b,l]),Object(c.useEffect)((function(){b.type=null!==j&&void 0!==j?j:"sine"}),[b,j]),Object(a.jsx)(be,{id:n,inputs:["detune","frequency"],outputs:["output"],title:"".concat(p.toFixed(2)," Hz ").concat(j),type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{max:100,min:-100,onChange:function(e){return d({detune:+e.target.value})},step:1,style:{width:"100%"},title:"Detune: ".concat(u," cents"),type:"range",value:u})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{max:2e4,min:0,onChange:function(e){return d({frequency:+e.target.value})},title:"Frequency",type:"number",value:l})}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("select",{onChange:function(e){return d({type:e.target.value})},title:"Wave",value:j,children:[Object(a.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(a.jsx)("option",{value:"square",children:"square"}),Object(a.jsx)("option",{value:"sine",children:"sine"}),Object(a.jsx)("option",{value:"triangle",children:"triangle"})]})})]})})}var Gt=o.a.memo(qt),Pt={display:"inline-block",textAlign:"center",width:7},Lt=Object(z.a)(Object(z.a)({},Pt),{},{verticalAlign:"sub"}),It=Object(z.a)(Object(z.a)({},Pt),{},{transform:"translateX(-100%)",verticalAlign:"super"});function Ht(e){var t=e.detune,n=e.octave,c=e.twelfth,o=vt(c).split(""),i=Object(u.a)(o,2),r=i[0],s=i[1],l=mt(n,c),d=l*Math.pow(2,t/1200);return Object(a.jsxs)("span",{children:[r,Object(a.jsx)("small",{style:Lt,children:n}),s&&Object(a.jsx)("small",{style:It,children:s}),"\xa0",Object(a.jsxs)("small",{children:["(",l.toFixed(2)," Hz",0!==t&&Object(a.jsxs)(a.Fragment,{children:[" \u2192 ",d.toFixed(2)," Hz"]}),")"]})]})}var zt=o.a.memo(Ht);function Qt(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.detune,u=void 0===r?0:r,s=t.octave,l=void 0===s?4:s,d=t.onChange,f=t.twelfth,j=void 0===f?0:f,p=t.type,b=void 0===p?"sine":p,m=mt(l,j),v=re(n,(function(e){return e.createOscillator()}));return Object(c.useEffect)((function(){return v.start(),function(){return v.stop()}}),[v]),Object(c.useEffect)((function(){v.detune.value=null!==u&&void 0!==u?u:0}),[v,u]),Object(c.useEffect)((function(){v.frequency.value=m}),[v,m]),Object(c.useEffect)((function(){v.type=null!==b&&void 0!==b?b:"sine"}),[v,b]),Object(a.jsx)(be,{id:n,inputs:["detune"],outputs:["output"],title:Object(a.jsx)(zt,{detune:u,octave:l,twelfth:j}),type:i,children:o&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{max:100,min:-100,onChange:function(e){return d({detune:+e.target.value})},step:1,style:{width:"100%"},title:"Detune: ".concat(u," cents"),type:"range",value:u})}),Object(a.jsxs)("div",{className:"customNode_item",children:[Object(a.jsx)("select",{onChange:function(e){return d({twelfth:+e.target.value})},style:{width:"50%"},title:"Note",value:j,children:Array(12).fill(0).map((function(e,t){return Object(a.jsx)("option",{value:t,children:vt(t)},t)}))}),Object(a.jsx)("select",{onChange:function(e){return d({octave:+e.target.value})},style:{width:"50%"},title:"Octave",value:l,children:Array(11).fill(0).map((function(e,t){return Object(a.jsx)("option",{value:t,children:t},t)}))})]}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("select",{onChange:function(e){return d({type:e.target.value})},style:{width:"100%"},title:"Wave",value:b,children:[Object(a.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(a.jsx)("option",{value:"square",children:"square"}),Object(a.jsx)("option",{value:"sine",children:"sine"}),Object(a.jsx)("option",{value:"triangle",children:"triangle"})]})})]})})}var Xt=o.a.memo(Qt);function Kt(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.onChange,u=t.output,s=void 0===u?"A":u,l=re(n,(function(e){var t=e.createGain(),n=e.createGain(),a=e.createGain();return t.connect(n),t.connect(a),{A:n,B:a,input:t,output:void 0}}));Object(c.useEffect)((function(){"A"===s?(l.A.gain.setTargetAtTime(1,l.A.context.currentTime,.015),l.B.gain.setTargetAtTime(0,l.A.context.currentTime,.015)):(l.A.gain.setTargetAtTime(0,l.A.context.currentTime,.015),l.B.gain.setTargetAtTime(1,l.A.context.currentTime,.015))}),[l,s]);var d=Object(c.useCallback)((function(){return r({output:"A"===s?"B":"A"})}),[r,s]);return Object(a.jsx)(be,{id:n,inputs:["input"],outputs:["A","B"],title:"Output: ".concat(s),type:i,children:o&&Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)(st,{checked:"A"===s,labelOff:"B",labelOn:"A",onChange:d})})})})}var Jt=o.a.memo(Kt);function Ut(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.levels,r=void 0===i?256:i,u=t.max,s=void 0===u?1:u,l=t.min,d=void 0===l?-1:l,f=t.onChange;return re(n,(function(e){return new AudioWorkletNode(e,"quantizer-processor",{processorOptions:{levels:r,max:s,min:d}})}),[r,s,d]),Object(a.jsx)(be,{id:n,inputs:["input"],outputs:["output"],title:"Quantizer",type:o,children:c&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsx)("div",{className:"customNode_item",style:{width:138},children:Object(a.jsx)("input",{onChange:function(e){return f({levels:+e.target.value})},step:1,title:"Levels",type:"number",value:r})}),Object(a.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(a.jsx)("input",{onChange:function(e){return f({min:+e.target.value})},step:1,style:{width:"50%"},title:"Min",type:"number",value:d}),Object(a.jsx)("input",{onChange:function(e){return f({max:+e.target.value})},style:{width:"50%"},step:1,title:"Max>",type:"number",value:s})]})]})})}var Vt,Yt=o.a.memo(Ut);function Zt(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.mode,r=void 0===i?Vt.HalfWave:i,u=t.onChange;return re(n,(function(e){return new AudioWorkletNode(e,"rectifier-processor",{processorOptions:{mode:r}})}),[r]),Object(a.jsx)(be,{id:n,inputs:["input"],outputs:["output"],title:"Rectifier",type:o,children:c&&Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("select",{onChange:function(e){return u({mode:e.target.value})},title:"Type",value:r,children:[Object(a.jsx)("option",{value:Vt.FullWave,children:Vt.FullWave}),Object(a.jsx)("option",{value:Vt.HalfWave,children:Vt.HalfWave})]})})})})}!function(e){e.FullWave="Full-wave",e.HalfWave="Half-wave"}(Vt||(Vt={}));var $t,en=o.a.memo(Zt);function tn(e){var t=e.id,n=e.type;return re(t,(function(e){var t,n=new AudioWorkletNode(e,"sample-and-hold-processor");return t={},Object(Y.a)(t,$t.HoldTime,n.parameters.get($t.HoldTime)),Object(Y.a)(t,"input",n),Object(Y.a)(t,"output",n),t})),Object(a.jsx)(be,{id:t,inputs:["input",$t.HoldTime],outputs:["output"],title:"Sample/Hold",type:n})}function nn(e){var t=e.id,n=e.type;return re(t,(function(e){return new AudioWorkletNode(e,"sign-processor")})),Object(a.jsx)(be,{id:t,inputs:["input"],outputs:["output"],title:"Sign",type:n})}function an(e){var t=e.data,n=e.id,o=e.selected,i=e.type,r=t.pan,u=void 0===r?0:r,s=t.onChange,l="Stereo: ".concat(Math.abs(100*u).toFixed(0),"% ").concat(u>0?"Right":u<0?"Left":""),d=re(n,(function(e){return e.createStereoPanner()}));return Object(c.useEffect)((function(){d.pan.value=u}),[d,u]),Object(a.jsx)(be,{id:n,inputs:["input","pan"],outputs:["output"],title:l,type:i,children:o&&Object(a.jsx)("div",{className:"customNode_editor nodrag",children:Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsx)("input",{max:"1",min:"-1",onChange:function(e){return s({pan:+e.target.value})},step:"0.01",title:l,type:"range",value:u})})})})}!function(e){e.HoldTime="holdTime"}($t||($t={}));var cn={width:50};function on(e){var t=e.data,n=e.id,c=e.selected,o=e.type,i=t.inputMax,r=void 0===i?1:i,u=t.inputMin,s=void 0===u?-1:u,l=t.onChange,d=t.outputMax,f=void 0===d?1:d,j=t.outputMin,p=void 0===j?0:j;return re(n,(function(e){return new AudioWorkletNode(e,"transformer-processor",{processorOptions:{inputMin:s,inputMax:r,outputMin:p,outputMax:f}})}),[s,r,p,f]),Object(a.jsx)(be,{id:n,inputs:["input"],outputs:["output"],title:"Transformer",type:o,children:c&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsxs)("div",{className:"customNode_item",children:[Object(a.jsx)("input",{onChange:function(e){return l({inputMin:+e.target.value})},style:cn,title:"Input min",type:"number",value:s}),Object(a.jsx)("span",{children:"\u2192"}),Object(a.jsx)("input",{onChange:function(e){return l({outputMin:+e.target.value})},style:cn,title:"Output min",type:"number",value:p})]}),Object(a.jsxs)("div",{className:"customNode_item",children:[Object(a.jsx)("input",{onChange:function(e){return l({inputMax:+e.target.value})},style:cn,title:"Input max",type:"number",value:r}),Object(a.jsx)("span",{children:"\u2192"}),Object(a.jsx)("input",{onChange:function(e){return l({outputMax:+e.target.value})},style:cn,title:"Output max",type:"number",value:f})]})]})})}function rn(e){var t,n=e.data,o=e.id,i=e.selected,r=e.type,s=n.onChange,l=n.oversample,d=Object(c.useState)(null!==(t=n.curveFn)&&void 0!==t?t:"const k = 50;\nconst samples = curve.length;\nconst deg = Math.PI / 180;\nfor (let i = 0; i < samples; i++) {\n  const x = (i * 2) / samples - 1;\n  curve[i] = ((3 + k) * x * 20 * deg) / (Math.PI + k * Math.abs(x));\n}\nreturn curve;"),f=Object(u.a)(d,2),j=f[0],b=f[1],m=Object(c.useState)(j),v=Object(u.a)(m,2),h=v[0],O=v[1],x=Object(c.useContext)(p),g=re(o,(function(){return x.createWaveShaper()})),y=Object(c.useMemo)((function(){var e=new Float32Array(x.sampleRate);return new Function("curve",h)(e)}),[x.sampleRate,h]);Object(c.useEffect)((function(){g.curve=y}),[g,y]),Object(c.useEffect)((function(){g.oversample=l}),[g,l]);var N=Object(c.useCallback)((function(){try{new Function("curve",j)(new Float32Array(x.sampleRate)),O(j),s({curveFn:j})}catch(e){console.error(e)}}),[x.sampleRate,j,s]);return Object(a.jsx)(be,{id:o,inputs:["input"],outputs:["output"],type:r,children:i&&Object(a.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(a.jsxs)("div",{className:"customNode_item",style:{flexWrap:"wrap"},children:[Object(a.jsx)("textarea",{onChange:function(e){return b(e.target.value)},rows:8,style:{width:"100%"},title:"Curve function",value:j}),Object(a.jsx)("button",{onClick:N,children:"save"})]}),Object(a.jsx)("div",{className:"customNode_item",children:Object(a.jsxs)("select",{onChange:function(e){return s({oversample:e.target.value})},title:"Oversample",value:l,children:[Object(a.jsx)("option",{value:"none",children:"none"}),Object(a.jsx)("option",{value:"2x",children:"2x"}),Object(a.jsx)("option",{value:"4x",children:"4x"})]})})]})})}function un(e){var t=e.id,n=e.type;return re(t,(function(e){return new AudioWorkletNode(e,"xor-gate-processor",{numberOfInputs:2})})),Object(a.jsx)(be,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: XOR",type:n})}var sn={ADSR:ve,Analyser:Ne,AndGate:ke,AudioBufferSource:Ae,BiquadFilter:Ee,ChannelMerger:Re,ChannelSplitter:We,Comparator:Be,ConstantSource:Ge,Delay:He,DelayEffect:Ke,Destination:Ue,DynamicsCompressor:Ye,Equalizer:tt,Gain:it,Gate:ut,InputSwitch:jt,Keyboard:yt,Meter:wt,Metronome:St,Noise:Rt,NotGate:Wt,OrGate:Bt,Oscillator:Gt,OscillatorNote:Xt,OutputSwitch:Jt,Quantizer:Yt,Rectifier:en,SampleAndHold:o.a.memo(tn),Sign:o.a.memo(nn),StereoPanner:o.a.memo(an),Transformer:o.a.memo(on),WaveShaper:o.a.memo(rn),XorGate:o.a.memo(un)};function ln(e){return e.source?Object.assign({},e,{style:{stroke:"#".concat(e.source.substr(-6))}}):e}function dn(e,t){return fn.apply(this,arguments)}function fn(){return(fn=Object(j.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.filter(s.h).reduce((function(e,t){return e[t.source]=!0,e[t.target]=!0,e}),{});case 1:if(!Object.keys(a).length){e.next=7;break}return Object.keys(n).forEach((function(e){delete a[e]})),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jn=10;function pn(e){return Math.floor(e/jn)*jn}function bn(){var e=le(),t=e.elements,n=e.onChangeElementFactory,o=e.setElements,i=e.setTransform,r=e.transform,d=X(),p=ie().nodes,b=Object(c.useState)(null),m=Object(u.a)(b,2),v=m[0],h=m[1],O=function(){var e=ie().getNode;return Object(c.useCallback)((function(t){return ne(t,e)}),[e])}(),x=function(){var e=ie().getNode;return Object(c.useCallback)((function(t){return ae(t,e)}),[e])}(),g=function(){var e=ie().getNode;return Object(c.useCallback)((function(t){return Z(e(t))}),[e])}(),y=Object(c.useCallback)(function(){var e=Object(j.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setTransform(r),o(Object(l.a)((function(e){e.filter(s.i).forEach((function(e){e.data.onChange=n(e.id)}))}))),e.next=4,dn(t,p);case 4:t.filter(s.h).forEach((function(e){return O(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),N=Object(c.useCallback)((function(e){i(e)}),[i]),C=Object(c.useCallback)((function(e,t){h(t)}),[]),k=Object(c.useCallback)((function(e){return h(null)}),[]),w=Object(c.useCallback)((function(e){o((function(t){return Object(s.f)(ln(e),t)})),O(e)}),[O,o]),T=Object(c.useCallback)((function(e){e.filter(s.h).forEach((function(e){return x(e)})),e.filter(s.i).forEach((function(e){return g(e.id)})),o((function(t){return Object(s.j)(e,t)}))}),[x,g,o]),A=Object(c.useCallback)((function(e,t){x(e),o((function(t){return Object(s.j)([e],t)})),o((function(e){return Object(s.f)(ln(t),e)})),O(t)}),[x,O,o]),M=Object(c.useCallback)((function(e,t){o(Object(l.a)((function(e){var n=e.filter(s.i).find((function(e){return e.id===t.id}));n&&(n.position={x:pn(t.position.x),y:pn(t.position.y)})})))}),[o]),E=Object(c.useCallback)((function(e){var t="".concat(e,"-").concat(Object(V.a)()),a={id:t,data:{onChange:n(t)},type:e,position:{x:pn((d.getRect().left-r.x)/r.zoom),y:pn((d.getRect().top-r.y)/r.zoom)}};o((function(e){return[].concat(Object(U.a)(e),[a])})),d.hide()}),[d,n,o,r]),S=Object(c.useCallback)((function(){d.hide()}),[d]),_=Object(c.useCallback)((function(e){e.preventDefault(),d.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),d.show(Object(a.jsx)(ct,{addNode:E}))}),[E,d]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(s.g,{"data-connecting-handletype":v?v.handleType:void 0,defaultPosition:[r.x,r.y],defaultZoom:r.zoom,elements:t,nodeTypes:sn,onConnect:w,onConnectStart:C,onConnectStop:k,onEdgeUpdate:A,onElementsRemove:T,onLoad:y,onMoveEnd:N,onNodeDragStop:M,onPaneClick:S,onPaneContextMenu:_,onlyRenderVisibleElements:!1,selectNodesOnDrag:!1,snapToGrid:!0,snapGrid:[jn,jn],style:{zIndex:0},children:[Object(a.jsx)(s.a,{gap:jn}),Object(a.jsx)(s.b,{})]})})}var mn=o.a.memo(bn),vn={fontSize:12,height:"100%",resize:"none",width:"100%"},hn={display:"flex",position:"absolute",right:"100%",top:-10,transform:"rotate(-90deg)",transformOrigin:"bottom right"},On=function(){return{id:Object(V.a)(),elements:[],transform:{x:0,y:0,zoom:1}}};var xn=function(){var e=le(),t=e.elements,n=e.id,o=e.setElements,i=e.setId,r=e.setTransform,s=e.transform,l=Object(c.useState)(!1),d=Object(u.a)(l,2),f=d[0],j=d[1],p=Object(c.useMemo)((function(){return function(e){return{height:"100%",padding:10,position:"absolute",right:0,top:0,transform:e?"translateX(0)":"translateX(100%)",transition:"transform 0.4s ease",width:400}}(f)}),[f]);Object(c.useEffect)((function(){var e=atob(window.location.hash.substr(1));try{var t=JSON.parse(e),n=t.elements,a=t.id,c=t.transform;o(n),i(null!==a&&void 0!==a?a:Object(V.a)()),r(c)}catch(u){console.error(u)}}),[o,i,r]),Object(c.useEffect)((function(){window.location.hash=btoa(JSON.stringify({elements:t.map((function(e){return Object(z.a)(Object(z.a)({},e),{},{__rf:void 0})})),id:n,transform:s}))}),[t,n,s]);var b=Object(c.useCallback)((function(e){try{var t=JSON.parse(e.target.value),n=t.elements,a=t.id,c=t.transform;o(n),i(null!==a&&void 0!==a?a:Object(V.a)()),r(c)}catch(e){console.error(e)}}),[o,i,r]),m=Object(c.useCallback)((function(){var e=On();o(e.elements),i(e.id),r(e.transform)}),[o,i,r]),v=Object(c.useCallback)((function(){return j((function(e){return!e}))}),[]);return Object(a.jsxs)("div",{style:p,children:[Object(a.jsx)("textarea",{onChange:b,style:vn,value:JSON.stringify({elements:t.map((function(e){return Object(z.a)(Object(z.a)({},e),{},{__rf:void 0})})),id:n,transform:s},null,2)}),Object(a.jsxs)("div",{style:hn,children:[Object(a.jsx)("button",{onClick:m,style:{marginRight:10},children:"clear"}),Object(a.jsx)("button",{onClick:v,children:f?"hide":"show"})]})]})};var gn=function(){var e=Object(c.useMemo)(On,[]),t=Object(c.useState)(e.id),n=Object(u.a)(t,2),o=n[0],i=n[1],r=Object(c.useState)(e.elements),d=Object(u.a)(r,2),f=d[0],j=d[1],p=Object(c.useState)(e.transform),b=Object(u.a)(p,2),m=b[0],v=b[1],h={elements:f,id:o,onChangeElementFactory:Object(c.useCallback)((function(e){return function(t){j(Object(l.a)((function(n){var a=n.filter(s.i).find((function(t){return t.id===e}));a&&Object.keys(t).forEach((function(e){return a.data[e]=t[e]}))})))}}),[j]),setElements:j,setId:i,setTransform:v,transform:m};return Object(a.jsx)(se.Provider,{value:h,children:Object(a.jsx)(H,{children:Object(a.jsx)(s.e,{children:Object(a.jsx)($,{children:Object(a.jsx)(J,{children:Object(a.jsxs)("div",{style:{alignItems:"stretch",display:"flex",height:"100vh"},children:[Object(a.jsx)(mn,{},h.id),Object(a.jsx)(xn,{})]})})})})})})},yn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(gn,{})}),document.getElementById("root")),yn()}],[[45,1,2]]]);
//# sourceMappingURL=main.0a577894.chunk.js.map