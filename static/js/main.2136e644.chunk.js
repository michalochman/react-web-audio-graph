(this["webpackJsonpreact-web-audio-graph"]=this["webpackJsonpreact-web-audio-graph"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"6fe4cbeb7216dd5f91c3.worklet.js"},function(e,t,n){e.exports=n.p+"3c60d6738f1135879fc6.worklet.js"},function(e,t,n){e.exports=n.p+"d7691c746ba495f49384.worklet.js"},function(e,t,n){e.exports=n.p+"ee2ccda5b07e710428d9.worklet.js"},function(e,t,n){e.exports=n.p+"2fd20acac10a566f9a75.worklet.js"},function(e,t,n){e.exports=n.p+"7609024a0dfa6519ee36.worklet.js"},function(e,t,n){e.exports=n.p+"bb20777439c70ae891d8.worklet.js"},function(e,t,n){e.exports=n.p+"f6855cba3f25275ae3e9.worklet.js"},function(e,t,n){e.exports=n.p+"64d1892a3999c7d09079.worklet.js"},function(e,t,n){e.exports=n.p+"0d5b39bea6f7ad721ba4.worklet.js"},function(e,t,n){e.exports=n.p+"b90471baecaa5b3e21eb.worklet.js"},function(e,t,n){e.exports=n.p+"5fec77c4657f1a14234a.worklet.js"},function(e,t,n){e.exports=n.p+"47be22378c03e68e41b9.worklet.js"},,,,,,,,,function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),a=n.n(i),r=n(12),o=n.n(r),u=(n(38),n(4)),s=n(3),l=n(8),d=n(6),j=n.n(d),f=n(7),b=Object(i.createContext)(null);var p=n(17),m=n.n(p),h=n(18),v=n.n(h),O=n(19),x=n.n(O),g=n(20),y=n.n(g),N=n(21),C=n.n(N),k=n(22),w=n.n(k),T=n(23),M=n.n(T),A=n(24),E=n.n(A),S=n(25),_=n.n(S),R=n(26),D=n.n(R),W=n(27),F=n.n(W),B=n(28),q=n.n(B),G=n(29),P=n.n(G);var I=function(e){var t=e.children,n=Object(i.useState)(!1),a=Object(u.a)(n,2),r=a[0],o=a[1],s=Object(i.useMemo)((function(){try{return window.AudioContext||(window.AudioContext=window.webkitAudioContext),new window.AudioContext}catch(e){}}),[]);Object(i.useEffect)((function(){var e=function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.audioWorklet.addModule(m.a),t.audioWorklet.addModule(v.a),t.audioWorklet.addModule(x.a),t.audioWorklet.addModule(y.a),t.audioWorklet.addModule(w.a),t.audioWorklet.addModule(M.a),t.audioWorklet.addModule(E.a),t.audioWorklet.addModule(_.a),t.audioWorklet.addModule(C.a),t.audioWorklet.addModule(D.a),t.audioWorklet.addModule(F.a),t.audioWorklet.addModule(q.a),t.audioWorklet.addModule(P.a)]);case 2:o(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();s&&e(s)}),[s]);var l=Object(i.useCallback)((function(){"suspended"===(null===s||void 0===s?void 0:s.state)&&s.resume()}),[s]);return s?r?Object(c.jsx)("div",{onClick:l,children:Object(c.jsx)(b.Provider,{value:s,children:t})}):null:Object(c.jsx)("div",{children:"Sorry, but the Web Audio API is not supported by your browser."})},L=n(2),H=Object(i.createContext)(null);function z(){return Object(i.useContext)(H)}var Q=n(49);var X=function(e){var t=e.children,n=a.a.useState(null),r=Object(u.a)(n,2),o=r[0],s=r[1],l=a.a.useState(),d=Object(u.a)(l,2),j=d[0],f=d[1],b=Object(i.useRef)(),p=Object(Q.a)(b.current,j,{placement:"bottom-start"}),m=p.styles,h=p.attributes,v=Object(i.useMemo)((function(){return{getRect:function(){return null==b.current?{top:0,left:0,right:0,bottom:0,width:0,height:0}:b.current.getBoundingClientRect()},hide:function(){s(null)},show:function(e){s(e)},setRect:function(e){b.current={getBoundingClientRect:function(){return e}}},setPopperElement:f}}),[]);return Object(c.jsxs)(H.Provider,{value:v,children:[t,Object(c.jsx)("div",Object(L.a)(Object(L.a)({ref:function(e){return e&&f(e)},style:m.popper},h.popper),{},{children:o}))]})},K=n(10),J=n(50),U=n(5);function V(e){var t,n,c,i,a,r,o,u;ne(e)?(null===(t=e.input)||void 0===t||null===(n=t.stop)||void 0===n||n.call(t),null===(c=e.output)||void 0===c||null===(i=c.stop)||void 0===i||i.call(c),null===(a=e.input)||void 0===a||a.disconnect(),null===(r=e.output)||void 0===r||r.disconnect()):(null===(o=(u=e).stop)||void 0===o||o.call(u),e.disconnect(),e instanceof AudioWorkletNode&&e.port.postMessage("stop"))}var Y=function(e){var t=e.children,n=Object(i.useRef)({}),a=Object(i.useMemo)((function(){return{addNode:function(e,t){n.current[e]=t},getNode:function(e){return n.current[e]},nodes:n.current,removeNode:function(e){V(n.current[e]),delete n.current[e]}}}),[]);return Object(c.jsx)("div",{children:Object(c.jsx)(ce.Provider,{value:a,children:t})})};function Z(e){var t,n;return+(null!==(t=null===(n=e.match(/-(\d+)$/))||void 0===n?void 0:n[1])&&void 0!==t?t:0)}function $(e,t){if(!e.source||!e.target||!e.sourceHandle||!e.targetHandle)throw new Error("Invalid connection");var n=e.targetHandle.startsWith("input"),c=e.sourceHandle.startsWith("output"),i=t(e.source),a=t(e.target);if(ne(i)&&c){if(!i.output)throw new Error("Invalid connection");i=i.output}if(ne(a)&&n){if(!a.input)throw new Error("Invalid connection");a=a.input}if(!i||!a)throw new Error("Invalid connection");return{inputIndex:n?Z(e.targetHandle):void 0,outputIndex:Z(e.sourceHandle),source:c?i:i[e.sourceHandle],target:n?a:a[e.targetHandle]}}function ee(e,t){try{var n=$(e,t),c=n.inputIndex,i=n.outputIndex,a=n.source,r=n.target;null!=c?a.connect(r,i,c):a.connect(r,i)}catch(o){console.error(o)}}function te(e,t){try{var n=$(e,t),c=n.inputIndex,i=n.outputIndex,a=n.source,r=n.target;null!=c?a.disconnect(r,i,c):a.disconnect(r,i)}catch(o){console.error(o)}}function ne(e){return e&&"input"in e&&"output"in e}var ce=Object(i.createContext)(null);function ie(){return Object(i.useContext)(ce)}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=Object(i.useContext)(b),a=ie(),r=a.addNode,o=a.getNode,u=a.removeNode,l=Object(s.k)((function(e){return e.edges})),d=Object(i.useMemo)((function(){return t(c)}),n);return Object(i.useEffect)((function(){r(e,d);var t=l.filter((function(t){return t.source===e||t.target===e}));return t.forEach((function(e){return ee(e,o)})),function(){t.forEach((function(e){return te(e,o)})),u(e)}}),[r,o,d,e,u]),d}var re=n(11),oe=Object(i.createContext)(null);function ue(){return Object(i.useContext)(oe)}function se(e){var t=e.children,n=e.id,a=e.inputs,r=e.outputs,o=e.title,u=e.type,l=Object(re.a)(e,["children","id","inputs","outputs","title","type"]),d=ue(),j=d.elements,f=d.onChangeElementFactory,b=d.setElements,p=z(),m=j.find((function(e){return e.id===n})),h=Object(i.useMemo)((function(){return{background:"#".concat(n.substr(-6))}}),[n]),v=Object(i.useCallback)((function(){if(!m)throw new Error("Node does not exist - this should never happen");var e="".concat(u,"-").concat(Object(J.a)()),t=f(e),n={id:e,data:Object(L.a)(Object(L.a)({},m.data),{},{onChange:t}),type:m.type,position:{x:m.position.x+un,y:m.position.y+un}};b((function(e){return[].concat(Object(K.a)(e),[n])})),p.hide()}),[p,f,m,b,u]),O=Object(i.useCallback)((function(){p.hide()}),[p]),x=Object(i.useCallback)((function(e){e.preventDefault(),p.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),p.show(Object(c.jsx)("ul",{className:"contextMenu",children:Object(c.jsx)("li",{onClick:v,children:"Clone"})}))}),[v,p]);return Object(c.jsxs)("div",Object(L.a)(Object(L.a)({className:"customNode",title:n,onClick:O,onContextMenu:x},l),{},{children:[Object(c.jsx)("div",{className:"customNode_header",children:null!==o&&void 0!==o?o:u}),Object(c.jsxs)("div",{className:"customNode_body",children:[a&&Object(c.jsx)("div",{className:"customNode_inputs",children:a.map((function(e){return Object(c.jsxs)("div",{className:"customNode_item",children:[Object(c.jsx)(s.c,{id:e,position:s.d.Left,style:h,type:"target"}),e]},e)}))}),r&&Object(c.jsx)("div",{className:"customNode_outputs",children:r.map((function(e){return Object(c.jsxs)("div",{className:"customNode_item",children:[Object(c.jsx)(s.c,{id:e,position:s.d.Right,style:h,type:"source"}),e]},e)}))})]}),t]}))}var le,de,je,fe=a.a.memo(se);function be(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.attackTime,u=void 0===o?.2:o,s=t.decayTime,l=void 0===s?.1:s,d=t.mode,j=void 0===d?le.Linear:d,f=t.onChange,b=t.releaseTime,p=void 0===b?.6:b,m=t.sustainLevel,h=void 0===m?.7:m,v=t.sustainOn,O=void 0===v||v,x=ae(n,(function(e){var t,n=new AudioWorkletNode(e,"adsr-processor",{processorOptions:{sustainOn:O,mode:j}});return t={},Object(U.a)(t,de.AttackTime,n.parameters.get(de.AttackTime)),Object(U.a)(t,de.DecayTime,n.parameters.get(de.DecayTime)),Object(U.a)(t,"gain",n),Object(U.a)(t,"gate",n),Object(U.a)(t,"input",void 0),Object(U.a)(t,"output",void 0),Object(U.a)(t,de.ReleaseTime,n.parameters.get(de.ReleaseTime)),Object(U.a)(t,de.SustainLevel,n.parameters.get(de.SustainLevel)),t}),[j,O]);return Object(i.useEffect)((function(){x[de.AttackTime].value=u}),[x,u]),Object(i.useEffect)((function(){x[de.DecayTime].value=l}),[x,l]),Object(i.useEffect)((function(){x[de.ReleaseTime].value=p}),[x,p]),Object(i.useEffect)((function(){x[de.SustainLevel].value=h}),[x,h]),Object(c.jsx)(fe,{id:n,inputs:["gate",de.AttackTime,de.DecayTime,de.ReleaseTime,de.SustainLevel],outputs:["gain"],title:"ADSR",type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("select",{onChange:function(e){return f({mode:e.target.value})},title:"Type",value:j,children:[Object(c.jsx)("option",{value:le.Exponential,children:le.Exponential}),Object(c.jsx)("option",{value:le.Linear,children:le.Linear}),Object(c.jsx)("option",{value:le.Logarithmic,children:le.Logarithmic})]})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{checked:O,onChange:function(){return f({sustainOn:!O})},title:"Sustain",type:"checkbox"}),"sustain on"]})}),Object(c.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(c.jsx)("input",{min:0,onChange:function(e){return f({attackTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Attack time",type:"number",value:u}),Object(c.jsx)("input",{min:0,onChange:function(e){return f({decayTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Decay time",type:"number",value:l})]}),Object(c.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(c.jsx)("input",{min:0,onChange:function(e){return f({releaseTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Release time",type:"number",value:p}),Object(c.jsx)("input",{max:1,min:0,onChange:function(e){return f({sustainLevel:+e.target.value})},step:.01,style:{width:"50%"},title:"Sustain level",type:"number",value:h})]})]})})}!function(e){e.Exponential="Exponential",e.Linear="Linear",e.Logarithmic="Logarithmic"}(le||(le={})),function(e){e.AttackTime="attack",e.DecayTime="decay",e.ReleaseTime="release",e.SustainLevel="sustain"}(de||(de={})),function(e){e.Attack="Attack",e.Decay="Decay",e.Release="Release",e.Sustain="Sustain"}(je||(je={}));var pe=a.a.memo(be);function me(e,t){var n=Object(i.useRef)(),c=Object(i.useRef)(),a=null===t||void 0===t?void 0:t.maxFPS,r=Object(i.useCallback)((function(t){if(null!=n.current){var i=t-n.current;(!a||i>1e3/a)&&(e(i),n.current=t)}else e(0),n.current=t;c.current=requestAnimationFrame(r)}),[e]);Object(i.useEffect)((function(){return c.current=requestAnimationFrame(r),function(){null!=c.current&&cancelAnimationFrame(c.current)}}),[r])}function he(e){var t=e.node,n=e.paused,a=e.type,r=Object(re.a)(e,["node","paused","type"]),o=Object(i.useRef)(new Uint8Array(t.frequencyBinCount)),u=Object(i.useRef)(null),s=Object(i.useCallback)((function(){var e=u.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&(a===ve.TimeDomain?function(e,t){var n=0,c=e.canvas.height,i=e.canvas.width,a=t.length,r=i/a;e.fillStyle="#001400",e.fillRect(0,0,i,256),e.lineWidth=2,e.strokeStyle="#00c800",e.beginPath(),e.moveTo(n,c-t[0]/128*c/2);for(var o=1;o<a;o++){var u=t[o]/128*c/2;e.lineTo(n,c-u),n+=r}e.stroke()}(t,o.current):a===ve.Frequency&&function(e,t){var n=0,c=e.canvas.height,i=e.canvas.width,a=t.length,r=i/a;e.fillStyle="#001400",e.fillRect(0,0,i,c),e.fillStyle="#00c800";for(var o=0;o<a;o++){var u=c*(t[o]/255),s=c-u;e.fillRect(n,s,r,u),n+=r}}(t,o.current))}),[a]),l=Object(i.useCallback)((function(){var e=t.frequencyBinCount,n=new Uint8Array(e);a===ve.TimeDomain?t.getByteTimeDomainData(n):a===ve.Frequency&&t.getByteFrequencyData(n),o.current=n}),[t,a]);return me(Object(i.useCallback)((function(){n||(l(),s())}),[s,l,n])),Object(c.jsx)("canvas",Object(L.a)({ref:u,style:{display:"block"}},r))}var ve,Oe=a.a.memo(he);function xe(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.fftSizeExp,u=void 0===o?11:o,s=t.onChange,l=t.paused,d=void 0!==l&&l,j=t.type,f=void 0===j?ve.TimeDomain:j,b=ae(n,(function(e){return e.createAnalyser()}));return Object(i.useEffect)((function(){b.fftSize=Math.pow(2,u)}),[b,u]),Object(c.jsxs)(fe,{id:n,inputs:["input","fftSize"],outputs:["output"],title:"Analyser: ".concat(f),type:r,children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)(Oe,{type:f,node:b,paused:d,height:64,width:256})}),a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsxs)("div",{className:"customNode_item",children:[Object(c.jsx)("input",{type:"range",max:"15",min:"5",onChange:function(e){return s({fftSizeExp:+e.target.value})},step:1,value:u}),Math.pow(2,u)]}),Object(c.jsxs)("div",{className:"customNode_item",style:{justifyContent:"space-between"},children:[Object(c.jsxs)("select",{onChange:function(e){return s({type:e.target.value})},title:"Type",value:f,children:[Object(c.jsx)("option",{value:ve.Frequency,children:ve.Frequency}),Object(c.jsx)("option",{value:ve.TimeDomain,children:ve.TimeDomain})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{checked:d,onChange:function(e){return s({paused:!d})},title:"Pause",type:"checkbox"}),"Paused"]})]})]})]})}!function(e){e.Frequency="Frequency",e.TimeDomain="Time Domain"}(ve||(ve={}));var ge=a.a.memo(xe);function ye(e){var t=e.id,n=e.type;return ae(t,(function(e){return new AudioWorkletNode(e,"and-gate-processor",{numberOfInputs:2})})),Object(c.jsx)(fe,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: AND",type:n})}var Ne=a.a.memo(ye);function Ce(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.loop,u=void 0===o||o,s=t.onChange,l=Object(i.useRef)(),d=ae(n,(function(e){return e.createGain()})),b=Object(i.useCallback)((function(e){var t;null===(t=l.current)||void 0===t||t.disconnect(),l.current=e,l.current.connect(d)}),[d]),p=Object(i.useCallback)((function(){if(l.current){var e=d.context.createBufferSource();e.buffer=l.current.buffer,e.loop=u,b(e),l.current.start()}}),[d,u,b]),m=Object(i.useCallback)((function(){try{var e;null===(e=l.current)||void 0===e||e.stop()}catch(t){}}),[]),h=Object(i.useCallback)(function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.context.createBufferSource(),e.t0=d.context,e.next=4,t.arrayBuffer();case 4:return e.t1=e.sent,e.next=7,e.t0.decodeAudioData.call(e.t0,e.t1);case 7:n.buffer=e.sent,n.loop=u,b(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,u,b]),v=Object(i.useCallback)((function(e){e.preventDefault(),h(e.target.files[0])}),[h]),O=Object(i.useCallback)((function(e){e.preventDefault()}),[]),x=Object(i.useCallback)(function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Object(K.a)(t.dataTransfer.items).filter((function(e){return"file"===e.kind}))[0].getAsFile(),h(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h]);return Object(c.jsx)(fe,{id:n,outputs:["output"],title:"Buffer Source",type:r,onDragOver:O,onDrop:x,children:Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsxs)("div",{className:"customNode_item",children:[Object(c.jsx)("button",{onClick:p,children:"Play"}),Object(c.jsx)("button",{onClick:m,children:"Stop"})]}),a&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{onChange:v,type:"file"})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{checked:u,onChange:function(){return s({loop:!u})},title:"Loop",type:"checkbox"}),"Loop"]})})]})]})})}var ke,we=a.a.memo(Ce);function Te(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.detune,u=void 0===o?0:o,s=t.gain,l=void 0===s?0:s,d=t.frequency,j=void 0===d?350:d,f=t.Q,b=void 0===f?1:f,p=t.onChange,m=t.type,h=void 0===m?ke.lowpass:m,v=Object(i.useRef)(null),O=ae(n,(function(e){return e.createBiquadFilter()}));Object(i.useEffect)((function(){O.detune.value=u}),[O,u]),Object(i.useEffect)((function(){O.frequency.value=j}),[O,j]),Object(i.useEffect)((function(){O.gain.value=l}),[O,l]),Object(i.useEffect)((function(){O.Q.value=b}),[O,b]),Object(i.useEffect)((function(){O.type=h}),[O,h]),Object(i.useEffect)((function(){var e=v.current,t=null===e||void 0===e?void 0:e.getContext("2d");if(e&&t){var n=new Float32Array(O.context.sampleRate/200).map((function(e,t){return 100*t})),c=new Float32Array(n.length),i=new Float32Array(n.length);O.getFrequencyResponse(n,c,i),function(e,t,n){var c=0,i=e.canvas.height,a=e.canvas.width,r=t.length,o=a/r;e.fillStyle="#001400",e.fillRect(0,0,a,i),e.lineWidth=1,e.strokeStyle="#ffffff77",e.beginPath(),e.moveTo(n.frequency.value/(n.context.sampleRate/2)*a,0),e.lineTo(n.frequency.value/(n.context.sampleRate/2)*a,i),e.stroke(),e.closePath(),e.lineWidth=2,e.strokeStyle="#00c800",e.beginPath();for(var u=0;u<r;u++){var s=t[u]*i/2;e.lineTo(c,i-s),c+=o}e.stroke()}(t,c,O)}}),[O,u,l,j,b,a,h]);var x=[ke.lowshelf,ke.highshelf,ke.peaking].includes(h),g=[ke.lowpass,ke.highpass,ke.bandpass,ke.peaking,ke.notch,ke.allpass].includes(h);return Object(c.jsx)(fe,{id:n,inputs:["input","detune","frequency","gain","Q"],outputs:["output"],title:"Filter: ".concat(h),type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{min:-100,max:100,onChange:function(e){return p({detune:+e.target.value})},step:1,title:"Detune: ".concat(u," cents"),type:"range",value:u})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{min:10,max:O.context.sampleRate/2,onChange:function(e){return p({frequency:+e.target.value})},step:1,title:"Frequency: ".concat(j," Hz"),type:"range",value:j})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{disabled:!x,min:-40,max:40,onChange:function(e){return p({gain:+e.target.value})},step:.1,title:"Gain: ".concat(l," dB"),type:"range",value:l})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{disabled:!g,min:1e-4,max:[ke.lowpass,ke.highpass].includes(h)?10:1e3,onChange:function(e){return p({Q:+e.target.value})},step:[ke.lowpass,ke.highpass].includes(h)?.1:10,title:"Q: ".concat(b),type:"range",value:b})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("select",{onChange:function(e){return p({type:e.target.value})},value:h,children:Object.values(ke).map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)}))})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("canvas",{ref:v,height:64,width:256})})]})})}!function(e){e.lowpass="lowpass",e.highpass="highpass",e.bandpass="bandpass",e.lowshelf="lowshelf",e.highshelf="highshelf",e.peaking="peaking",e.notch="notch",e.allpass="allpass"}(ke||(ke={}));var Me=a.a.memo(Te),Ae={2:"Stereo",4:"Quad",6:"5.1"};function Ee(e){var t=e.data,n=e.id,i=e.selected,a=e.type,r=t.inputs,o=void 0===r?2:r,u=t.onChange,s=ae(n,(function(e){return e.createChannelMerger(o)}),[o]);return Object(c.jsx)(fe,{id:n,inputs:Array(s.numberOfInputs).fill(0).map((function(e,t){return"input-".concat(t)})),outputs:["output"],type:a,children:i&&Object(c.jsx)("div",{className:"customNode_editor nodrag",children:Object(c.jsx)("div",{className:"customNode_item",style:{alignItems:"flex-start",flexDirection:"column"},children:Object.keys(Ae).map((function(e){return Object(c.jsxs)("label",{title:"Channel configuration",children:[Object(c.jsx)("input",{checked:o===+e,onChange:function(e){return u({inputs:+e.target.value})},type:"radio",value:+e})," ",Ae[e]]},e)}))})})})}var Se=a.a.memo(Ee);function _e(e){var t=e.data,n=e.id,i=e.selected,a=e.type,r=t.onChange,o=t.outputs,u=void 0===o?2:o,s=ae(n,(function(e){return e.createChannelSplitter(u)}),[u]);return Object(c.jsx)(fe,{id:n,inputs:["input"],outputs:Array(s.numberOfOutputs).fill(0).map((function(e,t){return"output-".concat(t)})),type:a,children:i&&Object(c.jsx)("div",{className:"customNode_editor nodrag",children:Object(c.jsx)("div",{className:"customNode_item",style:{alignItems:"flex-start",flexDirection:"column"},children:Object.keys(Ae).map((function(e){return Object(c.jsxs)("label",{title:"Channel configuration",children:[Object(c.jsx)("input",{checked:u===+e,onChange:function(e){return r({outputs:+e.target.value})},type:"radio",value:+e})," ",Ae[e]]},e)}))})})})}var Re=a.a.memo(_e);function De(e){var t=e.id,n=e.type;return ae(t,(function(e){return new AudioWorkletNode(e,"comparator-processor",{numberOfInputs:2})})),Object(c.jsx)(fe,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Comparator",type:n})}var We=a.a.memo(De);function Fe(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.offset,u=void 0===o?1:o,s=t.onChange,l=ae(n,(function(e){return e.createConstantSource()}));return Object(i.useEffect)((function(){return l.start(),function(){return l.stop()}}),[l]),Object(i.useEffect)((function(){return l.offset.value=u}),[l,u]),Object(c.jsx)(fe,{id:n,outputs:["output"],title:"Constant: ".concat(u),type:r,children:a&&Object(c.jsx)("div",{className:"customNode_editor nodrag",children:Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{onChange:function(e){return s({offset:+e.target.value})},style:{width:"100%"},title:"Offset",type:"number",value:u})})})})}var Be=a.a.memo(Fe);function qe(e){return Math.max(.001,Math.min(179.999,e))}function Ge(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.delayTime,u=void 0===o?1:o,s=t.maxDelayTime,l=void 0===s?1:s,d=t.onChange,j=ae(n,(function(e){return e.createDelay(qe(l))}),[l]);return Object(i.useEffect)((function(){j.delayTime.value=u}),[j,u]),Object(c.jsx)(fe,{id:n,inputs:["input","delayTime"],outputs:["output"],title:"Delay: ".concat(u," s"),type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{max:j.delayTime.maxValue,min:j.delayTime.minValue,step:qe(l)/10,onChange:function(e){return d({delayTime:+e.target.value})},title:"Delay: ".concat(u," s"),type:"range",value:u})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{onChange:function(e){return d({maxDelayTime:+e.target.value})},max:0,min:180,title:"Max delay",type:"number",value:qe(l)})})]})})}var Pe,Ie=a.a.memo(Ge);!function(e){e.Linear="Linear",e.Log="Log"}(Pe||(Pe={}));var Le=function(e){var t=e.onChange,n=e.type,a=e.value,r=Object(re.a)(e,["onChange","type","value"]),o=.001,u=a;n===Pe.Log&&(o=9/(1/o),u=function(e){return(Math.pow(10,e)-1)/9}(u));var s=Object(i.useCallback)((function(e){var c=+e.target.value;n===Pe.Log&&(c=function(e){return Math.log10(1+9*e)}(c)),t(c)}),[t,n]);return Object(c.jsx)("input",Object(L.a)(Object(L.a)({},r),{},{type:"range",max:1,min:0,step:o,onChange:s,value:u}))};function He(e){return 20*Math.log10(Math.abs(e))}function ze(e){var t=e.data,n=e.id,i=e.selected,a=e.type,r=t.delayTime,o=void 0===r?.2:r,u=t.feedback,s=void 0===u?.7:u,l=t.mix,d=void 0===l?.5:l,j=t.onChange;return ae(n,(function(e){var t=e.createGain(),n=e.createGain(),c=e.createGain(),i=e.createGain(),a=e.createDelay(1);a.delayTime.value=o;var r=e.createGain();return r.gain.setTargetAtTime(s,r.context.currentTime,.015),c.gain.setTargetAtTime(Math.cos(.5*d*Math.PI),c.context.currentTime,.015),i.gain.setTargetAtTime(Math.cos(.5*(1-d)*Math.PI),i.context.currentTime,.015),t.connect(c),c.connect(n),t.connect(a),a.connect(i),i.connect(n),i.connect(r),r.connect(a),{input:t,output:n}}),[o,s,d]),Object(c.jsx)(fe,{id:n,inputs:["input"],outputs:["output"],title:"DelayEffect",type:a,children:i&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{max:"1",min:"0",onChange:function(e){return j({mix:+e.target.value})},step:"0.01",title:"Mix: ".concat(100*(1-d),"% dry / ").concat(100*d,"% wet"),type:"range",value:d})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{max:"1",min:"0",onChange:function(e){return j({delayTime:+e.target.value})},step:"0.01",title:"Delay: ".concat(o," s"),type:"range",value:o})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)(Le,{onChange:function(e){return j({feedback:e})},title:"Feedback: ".concat(He(s).toFixed(2)," dB"),type:Pe.Linear,value:s})})]})})}var Qe=a.a.memo(ze);function Xe(e){var t=e.id,n=e.type;return ae(t,(function(e){return e.destination})),Object(c.jsx)(fe,{id:t,inputs:["input"],type:n})}var Ke=a.a.memo(Xe);function Je(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.attack,u=void 0===o?.003:o,s=t.knee,l=void 0===s?30:s,d=t.onChange,j=t.ratio,f=void 0===j?12:j,b=t.release,p=void 0===b?.25:b,m=t.threshold,h=void 0===m?-24:m,v=ae(n,(function(e){return e.createDynamicsCompressor()}));return Object(i.useEffect)((function(){v.threshold.value=h}),[v,h]),Object(i.useEffect)((function(){v.knee.value=l}),[v,l]),Object(i.useEffect)((function(){v.ratio.value=f}),[v,f]),Object(i.useEffect)((function(){v.attack.value=u}),[v,u]),Object(i.useEffect)((function(){v.release.value=p}),[v,p]),Object(c.jsx)(fe,{id:n,inputs:["input","threshold","knee","ratio","attack","release"],outputs:["output"],type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{min:"-100",max:"0",onChange:function(e){return d({threshold:+e.target.value})},step:"1",title:"Threshold: ".concat(h," dB"),type:"range",value:h})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{min:"0",max:"40",onChange:function(e){return d({knee:+e.target.value})},step:"1",title:"Knee: ".concat(l," dB"),type:"range",value:l})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{min:"1",max:"20",onChange:function(e){return d({ratio:+e.target.value})},step:"1",title:"Ratio: ".concat(f," dB"),type:"range",value:f})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{min:"0",max:"1",onChange:function(e){return d({attack:+e.target.value})},step:"0.001",title:"Attack: ".concat(u," s"),type:"range",value:u})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{min:"0",max:"1",onChange:function(e){return d({release:+e.target.value})},step:"0.001",title:"Release: ".concat(p," s"),type:"range",value:p})})]})})}var Ue=a.a.memo(Je),Ve=[32,64,125,250,500,1e3,2e3,4e3,8e3,16e3];function Ye(e){var t=Math.pow(2,e);return Math.sqrt(t)/(t-1)}function Ze(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.bandwidth,u=void 0===o?1:o,s=t.gains,d=void 0===s?Array(Ve.length).fill(0):s,j=t.onChange,f=ae(n,(function(e){var t=e.createGain(),n=e.createGain(),c=Ve.map((function(t,n,c){var i=0===n,a=n===c.length-1,r=!i&&!a?d[n]:0,o=i?"lowshelf":a?"highshelf":"peaking",s=Ye(u),l=e.createBiquadFilter();return l.frequency.value=t,l.gain.value=r,l.type=o,l.Q.value=s,l}));return c.concat(n).reduce((function(e,t){return e.connect(t)}),t),{filters:c,input:t,output:n}}));return Object(i.useEffect)((function(){f.filters.forEach((function(e,t){e.gain.setTargetAtTime(d[t],e.context.currentTime,.015)}))}),[f,d]),Object(i.useEffect)((function(){f.filters.forEach((function(e){e.Q.setTargetAtTime(Ye(u),e.context.currentTime,.015)}))}),[f,u]),Object(c.jsx)(fe,{id:n,inputs:["input"],outputs:["output"],title:"EQ",type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("div",{className:"equalizer",children:f.filters.map((function(e,t){return Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{max:12,min:-12,onChange:function(e){return j({gains:Object(l.a)(d,(function(n){n[t]=+e.target.value}))})},step:.1,title:"Gain: ".concat(d[t]," dB"),type:"range",value:d[t]}),(n=e.frequency.value,n>=1e3?"".concat(Math.floor(n/1e3),"k"):"".concat(n))]},t);var n}))})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{max:4,min:.5,step:.5,onChange:function(e){return j({bandwidth:+e.target.value})},title:"Bandwidth: ".concat(u," octaves"),type:"range",value:u})})]})})}var $e=a.a.memo(Ze);function et(e){var t=e.addNode;return Object(c.jsxs)("ul",{className:"contextMenu",children:[Object(c.jsxs)("li",{children:["Sources",Object(c.jsxs)("ul",{className:"contextMenu sub",children:[Object(c.jsx)("li",{onClick:function(){return t("AudioBufferSource")},children:"Audio Buffer Source"}),Object(c.jsx)("li",{onClick:function(){return t("Gate")},children:"Gate"}),Object(c.jsx)("li",{onClick:function(){return t("Keyboard")},children:"Keyboard"}),Object(c.jsx)("li",{onClick:function(){return t("Metronome")},children:"Metronome"}),Object(c.jsx)("li",{onClick:function(){return t("Noise")},children:"Noise"}),Object(c.jsx)("li",{onClick:function(){return t("Oscillator")},children:"Oscillator"}),Object(c.jsx)("li",{onClick:function(){return t("OscillatorNote")},children:"Oscillator Note"})]})]}),Object(c.jsxs)("li",{children:["Destinations",Object(c.jsx)("ul",{className:"contextMenu sub",children:Object(c.jsx)("li",{onClick:function(){return t("Destination")},children:"Destination"})})]}),Object(c.jsxs)("li",{children:["Effects",Object(c.jsxs)("ul",{className:"contextMenu sub",children:[Object(c.jsx)("li",{onClick:function(){return t("BiquadFilter")},children:"Biquad Filter"}),Object(c.jsx)("li",{onClick:function(){return t("ChannelMerger")},children:"Channel Merger"}),Object(c.jsx)("li",{onClick:function(){return t("ChannelSplitter")},children:"Channel Splitter"}),Object(c.jsx)("li",{onClick:function(){return t("Delay")},children:"Delay"}),Object(c.jsx)("li",{onClick:function(){return t("DelayEffect")},children:"Delay Effect"}),Object(c.jsx)("li",{onClick:function(){return t("DynamicsCompressor")},children:"Dynamics Compressor"}),Object(c.jsx)("li",{onClick:function(){return t("Equalizer")},children:"Equalizer"}),Object(c.jsx)("li",{onClick:function(){return t("Gain")},children:"Gain"}),Object(c.jsx)("li",{onClick:function(){return t("Rectifier")},children:"Rectifier"}),Object(c.jsx)("li",{onClick:function(){return t("SampleAndHold")},children:"Sample and Hold"}),Object(c.jsx)("li",{onClick:function(){return t("Sign")},children:"Sign"}),Object(c.jsx)("li",{onClick:function(){return t("StereoPanner")},children:"Stereo Panner"}),Object(c.jsx)("li",{onClick:function(){return t("Transformer")},children:"Transformer"}),Object(c.jsx)("li",{onClick:function(){return t("WaveShaper")},children:"Wave Shaper"})]})]}),Object(c.jsxs)("li",{children:["Controllers",Object(c.jsxs)("ul",{className:"contextMenu sub",children:[Object(c.jsx)("li",{onClick:function(){return t("ADSR")},children:"ADSR"}),Object(c.jsx)("li",{onClick:function(){return t("ConstantSource")},children:"Constant Source"}),Object(c.jsx)("li",{onClick:function(){return t("InputSwitch")},children:"Input Switch"}),Object(c.jsx)("li",{onClick:function(){return t("OutputSwitch")},children:"Output Switch"})]})]}),Object(c.jsxs)("li",{children:["Logic",Object(c.jsxs)("ul",{className:"contextMenu sub",children:[Object(c.jsx)("li",{onClick:function(){return t("AndGate")},children:"AND Gate"}),Object(c.jsx)("li",{onClick:function(){return t("Comparator")},children:"Comparator"}),Object(c.jsx)("li",{onClick:function(){return t("NotGate")},children:"NOT Gate"}),Object(c.jsx)("li",{onClick:function(){return t("OrGate")},children:"OR Gate"}),Object(c.jsx)("li",{onClick:function(){return t("XorGate")},children:"XOR Gate"})]})]}),Object(c.jsxs)("li",{children:["Analysers",Object(c.jsxs)("ul",{className:"contextMenu sub",children:[Object(c.jsx)("li",{onClick:function(){return t("Analyser")},children:"Analyser"}),Object(c.jsx)("li",{onClick:function(){return t("Meter")},children:"Meter"})]})]})]})}var tt=a.a.memo(et);function nt(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.gain,u=void 0===o?1:o,s=t.onChange,l=t.type,d=void 0===l?Pe.Log:l,j="Gain: ".concat(He(u).toFixed(2)," dB"),f=ae(n,(function(e){return e.createGain()}));return Object(i.useEffect)((function(){f.gain.setTargetAtTime(u,f.context.currentTime,.015)}),[f,u]),Object(c.jsx)(fe,{id:n,inputs:["input","gain"],outputs:["output"],title:j,type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)(Le,{onChange:function(e){return s({gain:e})},title:j,type:d,value:u})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("select",{onChange:function(e){return s({type:e.target.value})},title:"Type",value:d,children:[Object(c.jsx)("option",{value:Pe.Linear,children:Pe.Linear}),Object(c.jsx)("option",{value:Pe.Log,children:Pe.Log})]})})]})})}var ct=a.a.memo(nt);function it(e){var t=e.data,n=e.id,a=e.type,r=t.isOn,o=void 0!==r&&r,u=t.onChange,s=ae(n,(function(e){return e.createConstantSource()}));Object(i.useEffect)((function(){return s.start(),function(){return s.stop()}}),[s]),Object(i.useEffect)((function(){s.offset.setTargetAtTime(o?1:0,s.context.currentTime,.015)}),[s,o]);var l=Object(i.useCallback)((function(e){"repeat"in e&&e.repeat||u({isOn:!0})}),[u]),d=Object(i.useCallback)((function(){return u({isOn:!1})}),[u]);return Object(c.jsx)(fe,{id:n,outputs:["output"],title:"Gate",type:a,children:Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("button",{onMouseDown:l,onMouseUp:d,onKeyDown:l,onKeyUp:d,children:["trigger ",o?"off":"on"]})})})}var at=a.a.memo(it);var rt=function(e){var t=e.checked,n=e.labelOff,i=void 0===n?"off":n,a=e.labelOn,r=void 0===a?"on":a,o=e.onChange;return Object(c.jsxs)("label",{className:"toggle",children:[Object(c.jsx)("input",{checked:t,onChange:o,type:"checkbox"}),Object(c.jsx)("span",{className:"option",children:r}),Object(c.jsx)("span",{className:"option",children:i})]})};function ot(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.input,u=void 0===o?"A":o,s=t.onChange,l=ae(n,(function(e){var t=e.createGain(),n=e.createGain(),c=e.createGain();return n.connect(t),c.connect(t),{A:n,B:c,input:void 0,output:t}}));Object(i.useEffect)((function(){"A"===u?(l.A.gain.setTargetAtTime(1,l.A.context.currentTime,.015),l.B.gain.setTargetAtTime(0,l.A.context.currentTime,.015)):(l.A.gain.setTargetAtTime(0,l.A.context.currentTime,.015),l.B.gain.setTargetAtTime(1,l.A.context.currentTime,.015))}),[l,u]);var d=Object(i.useCallback)((function(){return s({input:"A"===u?"B":"A"})}),[s,u]);return Object(c.jsx)(fe,{id:n,inputs:["A","B"],outputs:["output"],title:"Input: ".concat(u),type:r,children:a&&Object(c.jsx)("div",{className:"customNode_editor",children:Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)(rt,{checked:"A"===u,labelOff:"B",labelOn:"A",onChange:d})})})})}var ut,st,lt=a.a.memo(ot),dt=["C","C\u266f","D","D\u266f","E","F","F\u266f","G","G\u266f","A","A\u266f","B"];function jt(e){if(e<0||e>11)throw new RangeError("Octave must be between 0 and 11, is ".concat(e))}function ft(e,t){!function(e){if(e<0||e>10)throw new RangeError("Octave must be between 0 and 10, is ".concat(e))}(e),jt(t);return 16.3516*Math.pow(2,e+t/12)}function bt(e){return jt(e),dt[e]}!function(e){e[e.Whole="\ueca2"]="Whole",e[e.Half="\ueca3"]="Half",e[e.Quarter="\ueca5"]="Quarter",e[e.Sixteenth="\ueca9"]="Sixteenth",e[e.Eight="\ueca7"]="Eight"}(ut||(ut={})),function(e){e[e.Whole=1]="Whole",e[e.Half=2]="Half",e[e.Quarter=4]="Quarter",e[e.Eight=8]="Eight",e[e.Sixteenth=16]="Sixteenth"}(st||(st={}));n(42);var pt="key key-black",mt="key key-white";function ht(e){var t=e.data,n=e.id,a=e.type,r=t.octave,o=void 0===r?2:r,u=t.onChange,s=ae(n,(function(e){var t=e.createConstantSource();return{frequency:e.createConstantSource(),gate:t,input:void 0,output:void 0}}));Object(i.useEffect)((function(){return s.frequency.offset.value=0,s.frequency.start(),s.gate.offset.value=0,s.gate.start(),function(){s.gate.disconnect(),s.gate.stop(),s.frequency.disconnect(),s.frequency.stop()}}),[s]);var l=Object(i.useCallback)((function(e,t){var n=s.frequency.context,c=ft(e,t);s.frequency.offset.setTargetAtTime(c,n.currentTime,.015)}),[s]),d=Object(i.useCallback)((function(){s.gate.offset.value=1}),[s]),j=Object(i.useCallback)((function(){s.gate.offset.value=0}),[s]);return Object(c.jsx)(fe,{id:n,outputs:["frequency","gate"],title:"Keyboard",type:a,children:Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("div",{className:"keyboard",onMouseDown:d,onMouseLeave:j,onMouseUp:j,children:[Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o-1,9)},children:"1"}),Object(c.jsx)("button",{className:pt,onMouseEnter:function(){return l(o-1,10)},children:"2"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o-1,11)},children:"3"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o,0)},children:"4"}),Object(c.jsx)("button",{className:pt,onMouseEnter:function(){return l(o,1)},children:"5"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o,2)},children:"6"}),Object(c.jsx)("button",{className:pt,onMouseEnter:function(){return l(o,3)},children:"7"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o,4)},children:"8"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o,5)},children:"9"}),Object(c.jsx)("button",{className:pt,onMouseEnter:function(){return l(o,6)},children:"10"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o,7)},children:"11"}),Object(c.jsx)("button",{className:pt,onMouseEnter:function(){return l(o,8)},children:"12"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o,9)},children:"13"}),Object(c.jsx)("button",{className:pt,onMouseEnter:function(){return l(o,10)},children:"14"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o,11)},children:"15"}),Object(c.jsx)("button",{className:mt,onMouseEnter:function(){return l(o+1,0)},children:"16"})]})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{min:1,max:6,onChange:function(e){return u({octave:+e.target.value})},title:"Octave",type:"number",value:o})})]})})}var vt,Ot=a.a.memo(ht);var xt=null!==(vt=window.devicePixelRatio)&&void 0!==vt?vt:1;function gt(e,t){e.setTransform(xt,0,0,xt,0,0),e.fillStyle="#000000",e.font="10px Arial",e.strokeStyle="#000000",e.textAlign="right",e.textBaseline="middle",e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore(),Array(55).fill(void 0).forEach((function(t,n){var c=[0,6,12,18,30,42,54].includes(n),i=c?1:.5,a=c?6:3,r="".concat(6-n),o=2*n+5.5,u=17+(c?0:3),s=o;c&&e.fillText(r,15,s),e.lineWidth=i,e.fillRect(0+u,o+0,a,i)})),t.forEach((function(t,n){Array(55).fill(void 0).forEach((function(c,i){var a,r=6-i,o=Math.min(Math.max(120*(a=Math.max(0,-r/10),Math.log10(1+9*a)),0),120).toFixed(0),u=He(t)>=r?"50%":"0%";e.fillStyle="hsl(".concat(o,", 50%, ").concat(u,")"),e.fillRect(27*(n+1)-2,2*i+5,25,2)}))}))}function yt(e){var t=e.id,n=e.type,a=Object(i.useRef)(null),r=Object(i.useRef)([]),o=Object(i.useState)(1),s=Object(u.a)(o,2),l=s[0],d=s[1],j=27*(l+1),f=ae(t,(function(e){return new AudioWorkletNode(e,"meter-processor",{numberOfOutputs:0})})),b=Object(i.useCallback)((function(e){var t=e.data;"channels"===t.type&&t.payload.channels!==l&&d(t.payload.channels),"level"===t.type&&(r.current[t.payload.channel]=t.payload.level)}),[l]);return Object(i.useEffect)((function(){f.port.onmessage=b}),[f,b]),me(Object(i.useCallback)((function(){var e=a.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&gt(t,r.current.slice(0,l))}),[l])),Object(c.jsx)(fe,{id:t,inputs:["input"],title:"Meter",type:n,children:Object(c.jsx)("div",{className:"customNode_editor",children:Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("canvas",{ref:a,width:xt*j,height:120*xt,style:{height:120,width:j}})})})})}var Nt=a.a.memo(yt),Ct=n(14),kt=(n(43),{fontFamily:"Bravura",fontSize:20,height:32,lineHeight:2,padding:0,width:32});function wt(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.beatsPerMeasure,u=void 0===o?4:o,s=t.beatsPerMinute,l=void 0===s?120:s,d=t.notes,j=void 0===d?[st.Quarter]:d,f=t.onChange,b=ae(n,(function(e){var t,n=60/l,c=n*u,i=e.createBuffer(1,e.sampleRate*c,e.sampleRate),a=i.getChannelData(0),r=Object(Ct.a)(j);try{for(r.s();!(t=r.n()).done;)for(var o=t.value,s=n*st.Quarter/o,d=e.sampleRate*s,f=880*o/st.Quarter,b=u*o/st.Quarter,p=0,m=1,h=0;h<b;h++)for(var v=0;v<d;v++){var O=0===h?1.33*f:f,x=v+Math.floor(h*d),g=1/j.length,y=Math.min(g,v/(.015*e.sampleRate));a[x]+=Math.sin(p)*m,p+=2*Math.PI*O/e.sampleRate,m=Math.max(y-v/d,0)}}catch(C){r.e(C)}finally{r.f()}var N=e.createBufferSource();return N.buffer=i,N.loop=!0,N.loopEnd=c,N}),[u,j.length,l]);Object(i.useEffect)((function(){return b.start(),function(){return b.stop()}}),[b]);var p=Object(i.useCallback)((function(e){return f({notes:j.includes(e)?j.filter((function(t){return t!==e})):j.concat(e)})}),[j,f]);return Object(c.jsx)(fe,{id:n,outputs:["output"],title:"Metronome: ".concat(l," BPM"),type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsxs)("div",{className:"customNode_item",children:[Object(c.jsx)("input",{max:208,min:40,onChange:function(e){return f({beatsPerMinute:+e.target.value})},title:"Beats Per Minute",type:"number",value:l}),Object(c.jsx)("input",{max:8,min:1,onChange:function(e){return f({beatsPerMeasure:+e.target.value})},title:"Beats Per Measure",type:"number",value:u})]}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("span",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[st.Whole,st.Half,st.Quarter,st.Eight,st.Sixteenth].map((function(e){return Object(c.jsx)("button",{onClick:function(){return p(e)},style:Object(L.a)(Object(L.a)({},kt),{},{color:j.includes(e)?"#0d0":"#d00"}),title:"".concat(st[e]," note"),children:ut[st[e]]},e)}))})})]})})}var Tt,Mt=a.a.memo(wt);function At(e){var t=e.data,n=e.id,i=e.selected,a=e.type,r=t.onChange,o=t.type,u=void 0===o?Tt.White:o;return ae(n,(function(e){return new AudioWorkletNode(e,"noise-processor",{numberOfInputs:0,processorOptions:{type:u}})}),[u]),Object(c.jsx)(fe,{id:n,outputs:["output"],title:"Noise: ".concat(u),type:a,children:i&&Object(c.jsx)("div",{className:"customNode_editor",children:Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("select",{onChange:function(e){return r({type:e.target.value})},title:"Type",value:u,children:[Object(c.jsx)("option",{value:Tt.White,children:Tt.White}),Object(c.jsx)("option",{value:Tt.Pink,children:Tt.Pink}),Object(c.jsx)("option",{value:Tt.Brown,children:Tt.Brown})]})})})})}!function(e){e.Brown="Brown",e.Pink="Pink",e.White="White"}(Tt||(Tt={}));var Et=a.a.memo(At);function St(e){var t=e.id,n=e.type;return ae(t,(function(e){return new AudioWorkletNode(e,"not-gate-processor")})),Object(c.jsx)(fe,{id:t,inputs:["input"],outputs:["output"],title:"Gate: NOT",type:n})}var _t=a.a.memo(St);function Rt(e){var t=e.id,n=e.type;return ae(t,(function(e){return new AudioWorkletNode(e,"or-gate-processor",{numberOfInputs:2})})),Object(c.jsx)(fe,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: OR",type:n})}var Dt=a.a.memo(Rt);function Wt(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.detune,u=void 0===o?0:o,s=t.frequency,l=void 0===s?440:s,d=t.onChange,j=t.type,f=void 0===j?"sine":j,b=l*Math.pow(2,u/1200),p=ae(n,(function(e){return e.createOscillator()}));return Object(i.useEffect)((function(){return p.start(),function(){return p.stop()}}),[p]),Object(i.useEffect)((function(){p.detune.value=null!==u&&void 0!==u?u:0}),[p,u]),Object(i.useEffect)((function(){p.frequency.value=null!==l&&void 0!==l?l:440}),[p,l]),Object(i.useEffect)((function(){p.type=null!==f&&void 0!==f?f:"sine"}),[p,f]),Object(c.jsx)(fe,{id:n,inputs:["detune","frequency"],outputs:["output"],title:"".concat(b.toFixed(2)," Hz ").concat(f),type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{max:100,min:-100,onChange:function(e){return d({detune:+e.target.value})},step:1,style:{width:"100%"},title:"Detune: ".concat(u," cents"),type:"range",value:u})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{max:2e4,min:0,onChange:function(e){return d({frequency:+e.target.value})},title:"Frequency",type:"number",value:l})}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("select",{onChange:function(e){return d({type:e.target.value})},title:"Wave",value:f,children:[Object(c.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(c.jsx)("option",{value:"square",children:"square"}),Object(c.jsx)("option",{value:"sine",children:"sine"}),Object(c.jsx)("option",{value:"triangle",children:"triangle"})]})})]})})}var Ft=a.a.memo(Wt),Bt={display:"inline-block",textAlign:"center",width:7},qt=Object(L.a)(Object(L.a)({},Bt),{},{verticalAlign:"sub"}),Gt=Object(L.a)(Object(L.a)({},Bt),{},{transform:"translateX(-100%)",verticalAlign:"super"});function Pt(e){var t=e.detune,n=e.octave,i=e.twelfth,a=bt(i).split(""),r=Object(u.a)(a,2),o=r[0],s=r[1],l=ft(n,i),d=l*Math.pow(2,t/1200);return Object(c.jsxs)("span",{children:[o,Object(c.jsx)("small",{style:qt,children:n}),s&&Object(c.jsx)("small",{style:Gt,children:s}),"\xa0",Object(c.jsxs)("small",{children:["(",l.toFixed(2)," Hz",0!==t&&Object(c.jsxs)(c.Fragment,{children:[" \u2192 ",d.toFixed(2)," Hz"]}),")"]})]})}var It=a.a.memo(Pt);function Lt(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.detune,u=void 0===o?0:o,s=t.octave,l=void 0===s?4:s,d=t.onChange,j=t.twelfth,f=void 0===j?0:j,b=t.type,p=void 0===b?"sine":b,m=ft(l,f),h=ae(n,(function(e){return e.createOscillator()}));return Object(i.useEffect)((function(){return h.start(),function(){return h.stop()}}),[h]),Object(i.useEffect)((function(){h.detune.value=null!==u&&void 0!==u?u:0}),[h,u]),Object(i.useEffect)((function(){h.frequency.value=m}),[h,m]),Object(i.useEffect)((function(){h.type=null!==p&&void 0!==p?p:"sine"}),[h,p]),Object(c.jsx)(fe,{id:n,inputs:["detune"],outputs:["output"],title:Object(c.jsx)(It,{detune:u,octave:l,twelfth:f}),type:r,children:a&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{max:100,min:-100,onChange:function(e){return d({detune:+e.target.value})},step:1,style:{width:"100%"},title:"Detune: ".concat(u," cents"),type:"range",value:u})}),Object(c.jsxs)("div",{className:"customNode_item",children:[Object(c.jsx)("select",{onChange:function(e){return d({twelfth:+e.target.value})},style:{width:"50%"},title:"Note",value:f,children:Array(12).fill(0).map((function(e,t){return Object(c.jsx)("option",{value:t,children:bt(t)},t)}))}),Object(c.jsx)("select",{onChange:function(e){return d({octave:+e.target.value})},style:{width:"50%"},title:"Octave",value:l,children:Array(11).fill(0).map((function(e,t){return Object(c.jsx)("option",{value:t,children:t},t)}))})]}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("select",{onChange:function(e){return d({type:e.target.value})},style:{width:"100%"},title:"Wave",value:p,children:[Object(c.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(c.jsx)("option",{value:"square",children:"square"}),Object(c.jsx)("option",{value:"sine",children:"sine"}),Object(c.jsx)("option",{value:"triangle",children:"triangle"})]})})]})})}var Ht=a.a.memo(Lt);function zt(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.onChange,u=t.output,s=void 0===u?"A":u,l=ae(n,(function(e){var t=e.createGain(),n=e.createGain(),c=e.createGain();return t.connect(n),t.connect(c),{A:n,B:c,input:t,output:void 0}}));Object(i.useEffect)((function(){"A"===s?(l.A.gain.setTargetAtTime(1,l.A.context.currentTime,.015),l.B.gain.setTargetAtTime(0,l.A.context.currentTime,.015)):(l.A.gain.setTargetAtTime(0,l.A.context.currentTime,.015),l.B.gain.setTargetAtTime(1,l.A.context.currentTime,.015))}),[l,s]);var d=Object(i.useCallback)((function(){return o({output:"A"===s?"B":"A"})}),[o,s]);return Object(c.jsx)(fe,{id:n,inputs:["input"],outputs:["A","B"],title:"Output: ".concat(s),type:r,children:a&&Object(c.jsx)("div",{className:"customNode_editor",children:Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)(rt,{checked:"A"===s,labelOff:"B",labelOn:"A",onChange:d})})})})}var Qt,Xt=a.a.memo(zt);function Kt(e){var t=e.data,n=e.id,i=e.selected,a=e.type,r=t.mode,o=void 0===r?Qt.HalfWave:r,u=t.onChange;return ae(n,(function(e){return new AudioWorkletNode(e,"rectifier-processor",{processorOptions:{mode:o}})}),[o]),Object(c.jsx)(fe,{id:n,inputs:["input"],outputs:["output"],title:"Rectifier",type:a,children:i&&Object(c.jsx)("div",{className:"customNode_editor",children:Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("select",{onChange:function(e){return u({mode:e.target.value})},title:"Type",value:o,children:[Object(c.jsx)("option",{value:Qt.FullWave,children:Qt.FullWave}),Object(c.jsx)("option",{value:Qt.HalfWave,children:Qt.HalfWave})]})})})})}!function(e){e.FullWave="Full-wave",e.HalfWave="Half-wave"}(Qt||(Qt={}));var Jt,Ut=a.a.memo(Kt);function Vt(e){var t=e.id,n=e.type;return ae(t,(function(e){var t,n=new AudioWorkletNode(e,"sample-and-hold-processor");return t={},Object(U.a)(t,Jt.HoldTime,n.parameters.get(Jt.HoldTime)),Object(U.a)(t,"input",n),Object(U.a)(t,"output",n),t})),Object(c.jsx)(fe,{id:t,inputs:["input",Jt.HoldTime],outputs:["output"],title:"Sample/Hold",type:n})}function Yt(e){var t=e.id,n=e.type;return ae(t,(function(e){return new AudioWorkletNode(e,"sign-processor")})),Object(c.jsx)(fe,{id:t,inputs:["input"],outputs:["output"],title:"Sign",type:n})}function Zt(e){var t=e.data,n=e.id,a=e.selected,r=e.type,o=t.pan,u=void 0===o?0:o,s=t.onChange,l="Stereo: ".concat(Math.abs(100*u).toFixed(0),"% ").concat(u>0?"Right":u<0?"Left":""),d=ae(n,(function(e){return e.createStereoPanner()}));return Object(i.useEffect)((function(){d.pan.value=u}),[d,u]),Object(c.jsx)(fe,{id:n,inputs:["input","pan"],outputs:["output"],title:l,type:r,children:a&&Object(c.jsx)("div",{className:"customNode_editor nodrag",children:Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsx)("input",{max:"1",min:"-1",onChange:function(e){return s({pan:+e.target.value})},step:"0.01",title:l,type:"range",value:u})})})})}!function(e){e.HoldTime="holdTime"}(Jt||(Jt={}));var $t={width:50};function en(e){var t=e.data,n=e.id,i=e.selected,a=e.type,r=t.inputMax,o=void 0===r?1:r,u=t.inputMin,s=void 0===u?-1:u,l=t.onChange,d=t.outputMax,j=void 0===d?1:d,f=t.outputMin,b=void 0===f?0:f;return ae(n,(function(e){return new AudioWorkletNode(e,"transformer-processor",{processorOptions:{inputMin:s,inputMax:o,outputMin:b,outputMax:j}})}),[s,o,b,j]),Object(c.jsx)(fe,{id:n,inputs:["input"],outputs:["output"],title:"Transformer",type:a,children:i&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsxs)("div",{className:"customNode_item",children:[Object(c.jsx)("input",{onChange:function(e){return l({inputMin:+e.target.value})},style:$t,title:"Input min",type:"number",value:s}),Object(c.jsx)("span",{children:"\u2192"}),Object(c.jsx)("input",{onChange:function(e){return l({outputMin:+e.target.value})},style:$t,title:"Output min",type:"number",value:b})]}),Object(c.jsxs)("div",{className:"customNode_item",children:[Object(c.jsx)("input",{onChange:function(e){return l({inputMax:+e.target.value})},style:$t,title:"Input max",type:"number",value:o}),Object(c.jsx)("span",{children:"\u2192"}),Object(c.jsx)("input",{onChange:function(e){return l({outputMax:+e.target.value})},style:$t,title:"Output max",type:"number",value:j})]})]})})}function tn(e){var t,n=e.data,a=e.id,r=e.selected,o=e.type,s=n.onChange,l=n.oversample,d=Object(i.useState)(null!==(t=n.curveFn)&&void 0!==t?t:"const k = 50;\nconst samples = curve.length;\nconst deg = Math.PI / 180;\nfor (let i = 0; i < samples; i++) {\n  const x = (i * 2) / samples - 1;\n  curve[i] = ((3 + k) * x * 20 * deg) / (Math.PI + k * Math.abs(x));\n}\nreturn curve;"),j=Object(u.a)(d,2),f=j[0],p=j[1],m=Object(i.useState)(f),h=Object(u.a)(m,2),v=h[0],O=h[1],x=Object(i.useContext)(b),g=ae(a,(function(){return x.createWaveShaper()})),y=Object(i.useMemo)((function(){var e=new Float32Array(x.sampleRate);return new Function("curve",v)(e)}),[x.sampleRate,v]);Object(i.useEffect)((function(){g.curve=y}),[g,y]),Object(i.useEffect)((function(){g.oversample=l}),[g,l]);var N=Object(i.useCallback)((function(){try{new Function("curve",f)(new Float32Array(x.sampleRate)),O(f),s({curveFn:f})}catch(e){console.error(e)}}),[x.sampleRate,f,s]);return Object(c.jsx)(fe,{id:a,inputs:["input"],outputs:["output"],type:o,children:r&&Object(c.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(c.jsxs)("div",{className:"customNode_item",style:{flexWrap:"wrap"},children:[Object(c.jsx)("textarea",{onChange:function(e){return p(e.target.value)},rows:8,style:{width:"100%"},title:"Curve function",value:f}),Object(c.jsx)("button",{onClick:N,children:"save"})]}),Object(c.jsx)("div",{className:"customNode_item",children:Object(c.jsxs)("select",{onChange:function(e){return s({oversample:e.target.value})},title:"Oversample",value:l,children:[Object(c.jsx)("option",{value:"none",children:"none"}),Object(c.jsx)("option",{value:"2x",children:"2x"}),Object(c.jsx)("option",{value:"4x",children:"4x"})]})})]})})}function nn(e){var t=e.id,n=e.type;return ae(t,(function(e){return new AudioWorkletNode(e,"xor-gate-processor",{numberOfInputs:2})})),Object(c.jsx)(fe,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: XOR",type:n})}var cn={ADSR:pe,Analyser:ge,AndGate:Ne,AudioBufferSource:we,BiquadFilter:Me,ChannelMerger:Se,ChannelSplitter:Re,Comparator:We,ConstantSource:Be,Delay:Ie,DelayEffect:Qe,Destination:Ke,DynamicsCompressor:Ue,Equalizer:$e,Gain:ct,Gate:at,InputSwitch:lt,Keyboard:Ot,Meter:Nt,Metronome:Mt,Noise:Et,NotGate:_t,OrGate:Dt,Oscillator:Ft,OscillatorNote:Ht,OutputSwitch:Xt,Rectifier:Ut,SampleAndHold:a.a.memo(Vt),Sign:a.a.memo(Yt),StereoPanner:a.a.memo(Zt),Transformer:a.a.memo(en),WaveShaper:a.a.memo(tn),XorGate:a.a.memo(nn)};function an(e){return e.source?Object.assign({},e,{style:{stroke:"#".concat(e.source.substr(-6))}}):e}function rn(e,t){return on.apply(this,arguments)}function on(){return(on=Object(f.a)(j.a.mark((function e(t,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.filter(s.h).reduce((function(e,t){return e[t.source]=!0,e[t.target]=!0,e}),{});case 1:if(!Object.keys(c).length){e.next=7;break}return Object.keys(n).forEach((function(e){delete c[e]})),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var un=10;function sn(e){return Math.floor(e/un)*un}function ln(){var e=ue(),t=e.elements,n=e.onChangeElementFactory,a=e.setElements,r=e.setTransform,o=e.transform,u=z(),d=ie().nodes,b=function(){var e=ie().getNode;return Object(i.useCallback)((function(t){return ee(t,e)}),[e])}(),p=function(){var e=ie().getNode;return Object(i.useCallback)((function(t){return te(t,e)}),[e])}(),m=function(){var e=ie().getNode;return Object(i.useCallback)((function(t){return V(e(t))}),[e])}(),h=Object(i.useCallback)(function(){var e=Object(f.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setTransform(o),a(Object(l.a)((function(e){e.filter(s.i).forEach((function(e){e.data.onChange=n(e.id)}))}))),e.next=4,rn(t,d);case 4:t.filter(s.h).forEach((function(e){return b(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),v=Object(i.useCallback)((function(e){r(e)}),[r]),O=Object(i.useCallback)((function(e){a((function(t){return Object(s.f)(an(e),t)})),b(e)}),[b,a]),x=Object(i.useCallback)((function(e){e.filter(s.h).forEach((function(e){return p(e)})),e.filter(s.i).forEach((function(e){return m(e.id)})),a((function(t){return Object(s.j)(e,t)}))}),[p,m,a]),g=Object(i.useCallback)((function(e,t){p(e),a((function(t){return Object(s.j)([e],t)})),a((function(e){return Object(s.f)(an(t),e)})),b(t)}),[p,b,a]),y=Object(i.useCallback)((function(e,t){a(Object(l.a)((function(e){var n=e.filter(s.i).find((function(e){return e.id===t.id}));n&&(n.position={x:sn(t.position.x),y:sn(t.position.y)})})))}),[a]),N=Object(i.useCallback)((function(e){var t="".concat(e,"-").concat(Object(J.a)()),c={id:t,data:{onChange:n(t)},type:e,position:{x:sn((u.getRect().left-o.x)/o.zoom),y:sn((u.getRect().top-o.y)/o.zoom)}};a((function(e){return[].concat(Object(K.a)(e),[c])})),u.hide()}),[u,n,a,o]),C=Object(i.useCallback)((function(){u.hide()}),[u]),k=Object(i.useCallback)((function(e){e.preventDefault(),u.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),u.show(Object(c.jsx)(tt,{addNode:N}))}),[N,u]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(s.g,{defaultPosition:[o.x,o.y],defaultZoom:o.zoom,elements:t,nodeTypes:cn,onConnect:O,onEdgeUpdate:g,onElementsRemove:x,onLoad:h,onMoveEnd:v,onNodeDragStop:y,onPaneClick:C,onPaneContextMenu:k,onlyRenderVisibleElements:!1,snapToGrid:!0,snapGrid:[un,un],style:{zIndex:0},children:[Object(c.jsx)(s.a,{gap:un}),Object(c.jsx)(s.b,{})]})})}var dn=a.a.memo(ln),jn={fontSize:12,height:"100%",resize:"none",width:"100%"},fn={display:"flex",position:"absolute",right:"100%",top:-10,transform:"rotate(-90deg)",transformOrigin:"bottom right"},bn=function(){return{id:Object(J.a)(),elements:[],transform:{x:0,y:0,zoom:1}}};var pn=function(){var e=ue(),t=e.elements,n=e.id,a=e.setElements,r=e.setId,o=e.setTransform,s=e.transform,l=Object(i.useState)(!1),d=Object(u.a)(l,2),j=d[0],f=d[1],b=Object(i.useMemo)((function(){return function(e){return{height:"100%",padding:10,position:"absolute",right:0,top:0,transform:e?"translateX(0)":"translateX(100%)",transition:"transform 0.4s ease",width:400}}(j)}),[j]);Object(i.useEffect)((function(){var e=atob(window.location.hash.substr(1));try{var t=JSON.parse(e),n=t.elements,c=t.id,i=t.transform;a(n),r(null!==c&&void 0!==c?c:Object(J.a)()),o(i)}catch(u){console.error(u)}}),[a,r,o]),Object(i.useEffect)((function(){window.location.hash=btoa(JSON.stringify({elements:t.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{__rf:void 0})})),id:n,transform:s}))}),[t,n,s]);var p=Object(i.useCallback)((function(e){try{var t=JSON.parse(e.target.value),n=t.elements,c=t.id,i=t.transform;a(n),r(null!==c&&void 0!==c?c:Object(J.a)()),o(i)}catch(e){console.error(e)}}),[a,r,o]),m=Object(i.useCallback)((function(){var e=bn();a(e.elements),r(e.id),o(e.transform)}),[a,r,o]),h=Object(i.useCallback)((function(){return f((function(e){return!e}))}),[]);return Object(c.jsxs)("div",{style:b,children:[Object(c.jsx)("textarea",{onChange:p,style:jn,value:JSON.stringify({elements:t.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{__rf:void 0})})),id:n,transform:s},null,2)}),Object(c.jsxs)("div",{style:fn,children:[Object(c.jsx)("button",{onClick:m,style:{marginRight:10},children:"clear"}),Object(c.jsx)("button",{onClick:h,children:j?"hide":"show"})]})]})};var mn=function(){var e=Object(i.useMemo)(bn,[]),t=Object(i.useState)(e.id),n=Object(u.a)(t,2),a=n[0],r=n[1],o=Object(i.useState)(e.elements),d=Object(u.a)(o,2),j=d[0],f=d[1],b=Object(i.useState)(e.transform),p=Object(u.a)(b,2),m=p[0],h=p[1],v={elements:j,id:a,onChangeElementFactory:Object(i.useCallback)((function(e){return function(t){f(Object(l.a)((function(n){var c=n.filter(s.i).find((function(t){return t.id===e}));c&&Object.keys(t).forEach((function(e){return c.data[e]=t[e]}))})))}}),[f]),setElements:f,setId:r,setTransform:h,transform:m};return Object(c.jsx)(oe.Provider,{value:v,children:Object(c.jsx)(I,{children:Object(c.jsx)(s.e,{children:Object(c.jsx)(Y,{children:Object(c.jsx)(X,{children:Object(c.jsxs)("div",{style:{alignItems:"stretch",display:"flex",height:"100vh"},children:[Object(c.jsx)(dn,{},v.id),Object(c.jsx)(pn,{})]})})})})})})},hn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(mn,{})}),document.getElementById("root")),hn()}],[[44,1,2]]]);
//# sourceMappingURL=main.2136e644.chunk.js.map