(this["webpackJsonpreact-web-audio-graph"]=this["webpackJsonpreact-web-audio-graph"]||[]).push([[0],{19:function(e,t,n){e.exports=n.p+"4f8c113a730448b3041e.worklet.js"},20:function(e,t,n){e.exports=n.p+"f6edf8db213dab5078f6.worklet.js"},21:function(e,t,n){e.exports=n.p+"4dd75441b9330df9172a.worklet.js"},22:function(e,t,n){e.exports=n.p+"96e6a9bf40acb3aafeac.worklet.js"},23:function(e,t,n){e.exports=n.p+"0352fac40b7cef2b7417.worklet.js"},24:function(e,t,n){e.exports=n.p+"ee65f5281eb0981e9f33.worklet.js"},25:function(e,t,n){e.exports=n.p+"44c1eceed8e1e415970f.worklet.js"},26:function(e,t,n){e.exports=n.p+"7e77916c173b8a6199f3.worklet.js"},27:function(e,t,n){e.exports=n.p+"29658624f5802829fb10.worklet.js"},28:function(e,t,n){e.exports=n.p+"0d803fdbdfc0024cd1a9.worklet.js"},29:function(e,t,n){e.exports=n.p+"f729867df9b46e0b3c12.worklet.js"},30:function(e,t,n){e.exports=n.p+"6c0c82b82177f4e80ce5.worklet.js"},31:function(e,t,n){e.exports=n.p+"8fec2b436ba0a20374b7.worklet.js"},32:function(e,t,n){e.exports=n.p+"917c453534d6146744ab.worklet.js"},40:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(14),o=n.n(i),r=(n(40),n(5)),u=n(8),s=n(12),l=n(3),d=n.n(l),f=n(4),j=Object(a.createContext)(null);var p=n(18),b=n(19),m=n.n(b),v=n(20),h=n.n(v),O=n(21),x=n.n(O),g=n(22),y=n.n(g),N=n(23),C=n.n(N),k=n(24),w=n.n(k),T=n(25),_=n.n(T),M=n(26),E=n.n(M),S=n(27),A=n.n(S),D=n(28),R=n.n(D),F=n(29),B=n.n(F),q=n(30),W=n.n(q),P=n(31),L=n.n(P),I=n(32),G=n.n(I),H=n(1);var z=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(r.a)(n,2),i=c[0],o=c[1],u=Object(a.useMemo)((function(){try{return new p.a}catch(e){}}),[]);Object(a.useEffect)((function(){var e=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.audioWorklet){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([t.audioWorklet.addModule(m.a),t.audioWorklet.addModule(h.a),t.audioWorklet.addModule(x.a),t.audioWorklet.addModule(y.a),t.audioWorklet.addModule(C.a),t.audioWorklet.addModule(w.a),t.audioWorklet.addModule(_.a),t.audioWorklet.addModule(E.a),t.audioWorklet.addModule(A.a),t.audioWorklet.addModule(R.a),t.audioWorklet.addModule(B.a),t.audioWorklet.addModule(W.a),t.audioWorklet.addModule(L.a),t.audioWorklet.addModule(G.a)]);case 4:o(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();u&&e(u)}),[u]);var s=Object(a.useCallback)((function(){"suspended"===(null===u||void 0===u?void 0:u.state)&&u.resume()}),[u]);return u?i?Object(H.jsx)("div",{onClick:s,children:Object(H.jsx)(j.Provider,{value:u,children:t})}):null:Object(H.jsx)("div",{children:"Sorry, but the Web Audio API is not supported by your browser."})},Q=n(2),X=Object(a.createContext)(null);function K(){return Object(a.useContext)(X)}var J=n(60);var U=function(e){var t=e.children,n=c.a.useState(null),i=Object(r.a)(n,2),o=i[0],u=i[1],s=c.a.useState(),l=Object(r.a)(s,2),d=l[0],f=l[1],j=Object(a.useRef)(),p=Object(J.a)(j.current,d,{placement:"bottom-start"}),b=p.styles,m=p.attributes,v=Object(a.useMemo)((function(){return{getRect:function(){return null==j.current?{top:0,left:0,right:0,bottom:0,width:0,height:0}:j.current.getBoundingClientRect()},hide:function(){u(null)},show:function(e){u(e)},setRect:function(e){j.current={getBoundingClientRect:function(){return e}}},setPopperElement:f}}),[]);return Object(H.jsxs)(X.Provider,{value:v,children:[t,Object(H.jsx)("div",Object(Q.a)(Object(Q.a)({ref:function(e){return e&&f(e)},style:b.popper},m.popper),{},{children:o}))]})},V=n(7),Y=n(61),Z=n(9);function $(e){var t,n,a,c,i,o,r,u;ie(e)?(null===(t=e.input)||void 0===t||null===(n=t.stop)||void 0===n||n.call(t),null===(a=e.output)||void 0===a||null===(c=a.stop)||void 0===c||c.call(a),null===(i=e.input)||void 0===i||i.disconnect(),null===(o=e.output)||void 0===o||o.disconnect()):(null===(r=(u=e).stop)||void 0===r||r.call(u),e.disconnect(),e instanceof p.b&&e.port.postMessage("stop"))}var ee=function(e){var t=e.children,n=Object(a.useRef)({}),c=Object(a.useMemo)((function(){return{addNode:function(e,t){n.current[e]=t},getNode:function(e){return n.current[e]},nodes:n.current,removeNode:function(e){$(n.current[e]),delete n.current[e]}}}),[]);return Object(H.jsx)("div",{children:Object(H.jsx)(oe.Provider,{value:c,children:t})})};function te(e){var t,n;return+(null!==(t=null===(n=e.match(/-(\d+)$/))||void 0===n?void 0:n[1])&&void 0!==t?t:0)}function ne(e,t){if(!e.source||!e.target||!e.sourceHandle||!e.targetHandle)throw new Error("Invalid connection");var n=e.targetHandle.startsWith("input"),a=e.sourceHandle.startsWith("output"),c=t(e.source),i=t(e.target);if(ie(c)&&a){if(!c.output)throw new Error("Invalid connection");c=c.output}if(ie(i)&&n){if(!i.input)throw new Error("Invalid connection");i=i.input}if(!c||!i)throw new Error("Invalid connection");return{inputIndex:n?te(e.targetHandle):void 0,outputIndex:te(e.sourceHandle),source:a?c:c[e.sourceHandle],target:n?i:i[e.targetHandle]}}function ae(e,t){try{var n=ne(e,t),a=n.inputIndex,c=n.outputIndex,i=n.source,o=n.target;null!=a?i.connect(o,c,a):i.connect(o,c)}catch(r){console.error(r)}}function ce(e,t){try{var n=ne(e,t),a=n.inputIndex,c=n.outputIndex,i=n.source,o=n.target;null!=a?i.disconnect(o,c,a):i.disconnect(o,c)}catch(r){console.error(r)}}function ie(e){return e&&"input"in e&&"output"in e}var oe=Object(a.createContext)(null);function re(){return Object(a.useContext)(oe)}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=Object(a.useContext)(j),i=re(),o=i.addNode,r=i.getNode,s=i.removeNode,l=Object(u.k)((function(e){return e.edges})),d=Object(a.useMemo)((function(){return t(c)}),n);return Object(a.useEffect)((function(){o(e,d);var t=l.filter((function(t){return t.source===e||t.target===e}));return t.forEach((function(e){return ae(e,r)})),function(){t.forEach((function(e){return ce(e,r)})),s(e)}}),[o,r,d,e,s]),d}var se=n(10),le=Object(a.createContext)(null);function de(){return Object(a.useContext)(le)}function fe(e){var t=e.children,n=e.id,c=e.inputs,i=e.outputs,o=e.title,r=e.type,s=Object(se.a)(e,["children","id","inputs","outputs","title","type"]),l=de(),d=l.elements,f=l.onChangeElementFactory,j=l.setElements,p=K(),b=d.find((function(e){return e.id===n})),m=Object(a.useMemo)((function(){return{background:"#".concat(n.substr(-6))}}),[n]),v=Object(a.useCallback)((function(){if(!b)throw new Error("Node does not exist - this should never happen");var e="".concat(r,"-").concat(Object(Y.a)()),t=f(e),n={id:e,data:Object(Q.a)(Object(Q.a)({},b.data),{},{onChange:t}),type:b.type,position:{x:b.position.x+Mn,y:b.position.y+Mn}};j((function(e){return[].concat(Object(V.a)(e),[n])})),p.hide()}),[p,f,b,j,r]),h=Object(a.useCallback)((function(){p.hide()}),[p]),O=Object(a.useCallback)((function(e){e.preventDefault(),p.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),p.show(Object(H.jsx)("ul",{className:"contextMenu",children:Object(H.jsx)("li",{onClick:v,children:"Clone"})}))}),[v,p]);return Object(H.jsxs)("div",Object(Q.a)(Object(Q.a)({className:"customNode",title:n,onClick:h,onContextMenu:O},s),{},{children:[Object(H.jsx)("div",{className:"customNode_header",children:null!==o&&void 0!==o?o:r}),Object(H.jsxs)("div",{className:"customNode_body",children:[c&&Object(H.jsx)("div",{className:"customNode_inputs",children:c.map((function(e){return Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)(u.c,{id:e,position:u.d.Left,style:m,type:"target"}),e]},e)}))}),i&&Object(H.jsx)("div",{className:"customNode_outputs",children:i.map((function(e){return Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)(u.c,{id:e,position:u.d.Right,style:m,type:"source"}),e]},e)}))})]}),t]}))}var je=c.a.memo(fe);var pe,be,me,ve=function(e,t,n,a){return ue(e,(function(e){return new p.b(e,t,n)}),a)};function he(e){var t=e.data,n=e.id,c=e.selected,i=e.type,o=t.attackTime,r=void 0===o?.2:o,u=t.decayTime,s=void 0===u?.1:u,l=t.mode,d=void 0===l?pe.Linear:l,f=t.onChange,j=t.releaseTime,p=void 0===j?.6:j,b=t.sustainLevel,m=void 0===b?.7:b,v=t.sustainOn,h=void 0===v||v,O=ve(n,"adsr-processor",{processorOptions:{sustainOn:h,mode:d}},[d,h]),x=ue(n,(function(){var e;return e={},Object(Z.a)(e,be.AttackTime,O.parameters.get(be.AttackTime)),Object(Z.a)(e,be.DecayTime,O.parameters.get(be.DecayTime)),Object(Z.a)(e,"gain",O),Object(Z.a)(e,"gate",O),Object(Z.a)(e,"input",void 0),Object(Z.a)(e,"output",void 0),Object(Z.a)(e,be.ReleaseTime,O.parameters.get(be.ReleaseTime)),Object(Z.a)(e,be.SustainLevel,O.parameters.get(be.SustainLevel)),e}),[d,h]);return Object(a.useEffect)((function(){x[be.AttackTime].value=r}),[x,r]),Object(a.useEffect)((function(){x[be.DecayTime].value=s}),[x,s]),Object(a.useEffect)((function(){x[be.ReleaseTime].value=p}),[x,p]),Object(a.useEffect)((function(){x[be.SustainLevel].value=m}),[x,m]),Object(H.jsx)(je,{id:n,inputs:["gate",be.AttackTime,be.DecayTime,be.ReleaseTime,be.SustainLevel],outputs:["gain"],title:"ADSR",type:i,children:c&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("select",{onChange:function(e){return f({mode:e.target.value})},title:"Type",value:d,children:[Object(H.jsx)("option",{value:pe.Exponential,children:pe.Exponential}),Object(H.jsx)("option",{value:pe.Linear,children:pe.Linear}),Object(H.jsx)("option",{value:pe.Logarithmic,children:pe.Logarithmic})]})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("label",{children:[Object(H.jsx)("input",{checked:h,onChange:function(){return f({sustainOn:!h})},title:"Sustain",type:"checkbox"}),"sustain on"]})}),Object(H.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(H.jsx)("input",{min:0,onChange:function(e){return f({attackTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Attack time",type:"number",value:r}),Object(H.jsx)("input",{min:0,onChange:function(e){return f({decayTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Decay time",type:"number",value:s})]}),Object(H.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(H.jsx)("input",{min:0,onChange:function(e){return f({releaseTime:+e.target.value})},step:.05,style:{width:"50%"},title:"Release time",type:"number",value:p}),Object(H.jsx)("input",{max:1,min:0,onChange:function(e){return f({sustainLevel:+e.target.value})},step:.01,style:{width:"50%"},title:"Sustain level",type:"number",value:m})]})]})})}!function(e){e.Exponential="Exponential",e.Linear="Linear",e.Logarithmic="Logarithmic"}(pe||(pe={})),function(e){e.AttackTime="attack",e.DecayTime="decay",e.ReleaseTime="release",e.SustainLevel="sustain"}(be||(be={})),function(e){e.Attack="Attack",e.Decay="Decay",e.Release="Release",e.Sustain="Sustain"}(me||(me={}));var Oe=c.a.memo(he);function xe(e,t){var n=Object(a.useRef)(),c=Object(a.useRef)(),i=null===t||void 0===t?void 0:t.maxFPS,o=Object(a.useCallback)((function(t){if(null!=n.current){var a=t-n.current;(!i||a>1e3/i)&&(e(a),n.current=t)}else e(0),n.current=t;c.current=requestAnimationFrame(o)}),[e]);Object(a.useEffect)((function(){return c.current=requestAnimationFrame(o),function(){null!=c.current&&cancelAnimationFrame(c.current)}}),[o])}function ge(e){var t=e.node,n=e.paused,c=e.type,i=Object(se.a)(e,["node","paused","type"]),o=Object(a.useRef)(new Uint8Array(t.frequencyBinCount)),r=Object(a.useRef)(null),u=Object(a.useCallback)((function(){var e=r.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&(c===Ne.TimeDomain?function(e,t){var n=0,a=e.canvas.height,c=e.canvas.width,i=t.length,o=c/i;e.fillStyle="#001400",e.fillRect(0,0,c,256),e.lineWidth=2,e.strokeStyle="#00c800",e.beginPath(),e.moveTo(n,a-t[0]/128*a/2);for(var r=1;r<i;r++){var u=t[r]/128*a/2;e.lineTo(n,a-u),n+=o}e.stroke()}(t,o.current):c===Ne.Frequency&&function(e,t){var n=0,a=e.canvas.height,c=e.canvas.width,i=t.length,o=c/i;e.fillStyle="#001400",e.fillRect(0,0,c,a),e.fillStyle="#00c800";for(var r=0;r<i;r++){var u=a*(t[r]/255),s=a-u;e.fillRect(n,s,o,u),n+=o}}(t,o.current))}),[c]),s=Object(a.useCallback)((function(){var e=t.frequencyBinCount,n=new Uint8Array(e);c===Ne.TimeDomain?t.getByteTimeDomainData(n):c===Ne.Frequency&&t.getByteFrequencyData(n),o.current=n}),[t,c]);return xe(Object(a.useCallback)((function(){n||(s(),u())}),[u,s,n])),Object(H.jsx)("canvas",Object(Q.a)({ref:r,style:{display:"block"}},i))}var ye=c.a.memo(ge);var Ne,Ce=function(e,t){var n=t.fftSizeExp,c=void 0===n?11:n,i=ue(e,(function(e){return e.createAnalyser()}));return Object(a.useEffect)((function(){i.fftSize=Math.pow(2,c)}),[i,c]),i};function ke(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.fftSizeExp,o=void 0===i?11:i,r=t.onChange,u=t.paused,s=void 0!==u&&u,l=t.type,d=void 0===l?Ne.TimeDomain:l,f=Ce(n,{fftSizeExp:o});return Object(H.jsxs)(je,{id:n,inputs:["input","fftSize"],outputs:["output"],title:"Analyser: ".concat(d),type:c,children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)(ye,{type:d,node:f,paused:s,height:64,width:256})}),a&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)("input",{type:"range",max:"15",min:"5",onChange:function(e){return r({fftSizeExp:+e.target.value})},step:1,value:o}),Math.pow(2,o)]}),Object(H.jsxs)("div",{className:"customNode_item",style:{justifyContent:"space-between"},children:[Object(H.jsxs)("select",{onChange:function(e){return r({type:e.target.value})},title:"Type",value:d,children:[Object(H.jsx)("option",{value:Ne.Frequency,children:Ne.Frequency}),Object(H.jsx)("option",{value:Ne.TimeDomain,children:Ne.TimeDomain})]}),Object(H.jsxs)("label",{children:[Object(H.jsx)("input",{checked:s,onChange:function(e){return r({paused:!s})},title:"Pause",type:"checkbox"}),"Paused"]})]})]})]})}!function(e){e.Frequency="Frequency",e.TimeDomain="Time Domain"}(Ne||(Ne={}));var we=c.a.memo(ke);function Te(e){var t=e.id,n=e.type;return ve(t,"and-gate-processor",{numberOfInputs:2}),Object(H.jsx)(je,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: AND",type:n})}var _e=c.a.memo(Te);function Me(e){var t=e.data,n=e.id,c=e.selected,i=e.type,o=t.loop,r=void 0===o||o,u=t.onChange,s=Object(a.useRef)(),l=ue(n,(function(e){return e.createGain()})),j=Object(a.useCallback)((function(e){var t;null===(t=s.current)||void 0===t||t.disconnect(),s.current=e,s.current.connect(l)}),[l]),p=Object(a.useCallback)((function(){if(s.current){var e=l.context.createBufferSource();e.buffer=s.current.buffer,e.loop=r,j(e),s.current.start()}}),[l,r,j]),b=Object(a.useCallback)((function(){try{var e;null===(e=s.current)||void 0===e||e.stop()}catch(t){}}),[]),m=Object(a.useCallback)(function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.context.createBufferSource(),e.t0=l.context,e.next=4,t.arrayBuffer();case 4:return e.t1=e.sent,e.next=7,e.t0.decodeAudioData.call(e.t0,e.t1);case 7:n.buffer=e.sent,n.loop=r,j(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,r,j]),v=Object(a.useCallback)((function(e){e.preventDefault(),m(e.target.files[0])}),[m]),h=Object(a.useCallback)((function(e){e.preventDefault()}),[]),O=Object(a.useCallback)(function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Object(V.a)(t.dataTransfer.items).filter((function(e){return"file"===e.kind}))[0].getAsFile(),m(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m]);return Object(H.jsx)(je,{id:n,outputs:["output"],title:"Buffer Source",type:i,onDragOver:h,onDrop:O,children:Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)("button",{onClick:p,children:"Play"}),Object(H.jsx)("button",{onClick:b,children:"Stop"})]}),c&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{onChange:v,type:"file"})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("label",{children:[Object(H.jsx)("input",{checked:r,onChange:function(){return u({loop:!r})},title:"Loop",type:"checkbox"}),"Loop"]})})]})]})})}var Ee=c.a.memo(Me);var Se=function(e,t){var n=t.detune,c=void 0===n?0:n,i=t.frequency,o=void 0===i?350:i,r=t.gain,u=void 0===r?0:r,s=t.Q,l=void 0===s?1:s,d=t.type,f=void 0===d?"lowpass":d,j=ue(e,(function(e){return e.createBiquadFilter()}));return Object(a.useEffect)((function(){j.detune.value=c}),[j,c]),Object(a.useEffect)((function(){j.frequency.value=o}),[j,o]),Object(a.useEffect)((function(){j.gain.value=u}),[j,u]),Object(a.useEffect)((function(){j.Q.value=l}),[j,l]),Object(a.useEffect)((function(){j.type=f}),[j,f]),j},Ae=["lowshelf","highshelf","peaking"],De=["lowpass","highpass","bandpass","peaking","notch","allpass"];function Re(e){var t=e.data,n=e.id,c=e.selected,i=e.type,o=t.detune,r=void 0===o?0:o,u=t.gain,s=void 0===u?0:u,l=t.frequency,d=void 0===l?350:l,f=t.Q,j=void 0===f?1:f,p=t.onChange,b=t.type,m=void 0===b?"lowpass":b,v=Object(a.useRef)(null),h=Se(n,{detune:r,frequency:d,gain:s,Q:j,type:m});Object(a.useEffect)((function(){var e=v.current,t=null===e||void 0===e?void 0:e.getContext("2d");if(e&&t){var n=new Float32Array(h.context.sampleRate/200).map((function(e,t){return 100*t})),a=new Float32Array(n.length),c=new Float32Array(n.length);h.getFrequencyResponse(n,a,c),function(e,t,n){var a=0,c=e.canvas.height,i=e.canvas.width,o=t.length,r=i/o;e.fillStyle="#001400",e.fillRect(0,0,i,c),e.lineWidth=1,e.strokeStyle="#ffffff77",e.beginPath(),e.moveTo(n.frequency.value/(n.context.sampleRate/2)*i,0),e.lineTo(n.frequency.value/(n.context.sampleRate/2)*i,c),e.stroke(),e.closePath(),e.lineWidth=2,e.strokeStyle="#00c800",e.beginPath();for(var u=0;u<o;u++){var s=t[u]*c/2;e.lineTo(a,c-s),a+=r}e.stroke()}(t,a,h)}}),[h,r,s,d,j,c,m]);var O=Ae.includes(m),x=De.includes(m);return Object(H.jsx)(je,{id:n,inputs:["input","detune","frequency","gain","Q"],outputs:["output"],title:"Filter: ".concat(m),type:i,children:c&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{min:-100,max:100,onChange:function(e){return p({detune:+e.target.value})},step:1,title:"Detune: ".concat(r," cents"),type:"range",value:r})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{min:10,max:h.context.sampleRate/2,onChange:function(e){return p({frequency:+e.target.value})},step:1,title:"Frequency: ".concat(d," Hz"),type:"range",value:d})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{disabled:!O,min:-40,max:40,onChange:function(e){return p({gain:+e.target.value})},step:.1,title:"Gain: ".concat(s," dB"),type:"range",value:s})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{disabled:!x,min:1e-4,max:["lowpass","highpass"].includes(m)?10:1e3,onChange:function(e){return p({Q:+e.target.value})},step:["lowpass","highpass"].includes(m)?.1:10,title:"Q: ".concat(j),type:"range",value:j})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("select",{onChange:function(e){return p({type:e.target.value})},value:m,children:[Object(H.jsx)("option",{value:"lowpass",children:"lowpass"}),Object(H.jsx)("option",{value:"highpass",children:"highpass"}),Object(H.jsx)("option",{value:"bandpass",children:"bandpass"}),Object(H.jsx)("option",{value:"lowshelf",children:"lowshelf"}),Object(H.jsx)("option",{value:"highshelf",children:"highshelf"}),Object(H.jsx)("option",{value:"peaking",children:"peaking"}),Object(H.jsx)("option",{value:"notch",children:"notch"}),Object(H.jsx)("option",{value:"allpass",children:"allpass"})]})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("canvas",{ref:v,height:64,width:256})})]})})}var Fe=c.a.memo(Re);var Be=function(e,t){var n=t.inputs,a=void 0===n?2:n;return ue(e,(function(e){return e.createChannelMerger(a)}),[a])},qe={2:"Stereo",4:"Quad",6:"5.1"};function We(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.inputs,o=void 0===i?2:i,r=t.onChange,u=Be(n,{inputs:o});return Object(H.jsx)(je,{id:n,inputs:Array(u.numberOfInputs).fill(0).map((function(e,t){return"input-".concat(t)})),outputs:["output"],type:c,children:a&&Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",style:{alignItems:"flex-start",flexDirection:"column"},children:Object.keys(qe).map((function(e){return Object(H.jsxs)("label",{title:"Channel configuration",children:[Object(H.jsx)("input",{checked:o===+e,onChange:function(e){return r({inputs:+e.target.value})},type:"radio",value:+e})," ",qe[e]]},e)}))})})})}var Pe=c.a.memo(We);var Le=function(e,t){var n=t.outputs,a=void 0===n?2:n;return ue(e,(function(e){return e.createChannelSplitter(a)}),[a])};function Ie(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.onChange,o=t.outputs,r=void 0===o?2:o,u=Le(n,{outputs:r});return Object(H.jsx)(je,{id:n,inputs:["input"],outputs:Array(u.numberOfOutputs).fill(0).map((function(e,t){return"output-".concat(t)})),type:c,children:a&&Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",style:{alignItems:"flex-start",flexDirection:"column"},children:Object.keys(qe).map((function(e){return Object(H.jsxs)("label",{title:"Channel configuration",children:[Object(H.jsx)("input",{checked:r===+e,onChange:function(e){return i({outputs:+e.target.value})},type:"radio",value:+e})," ",qe[e]]},e)}))})})})}var Ge=c.a.memo(Ie);function He(e){var t=e.id,n=e.type;return ve(t,"comparator-processor",{numberOfInputs:2}),Object(H.jsx)(je,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Comparator",type:n})}var ze=c.a.memo(He);var Qe=function(e,t){var n=t.offset,c=void 0===n?0:n,i=ue(e,(function(e){return e.createConstantSource()}));return Object(a.useEffect)((function(){return i.start(),function(){return i.stop()}}),[i]),Object(a.useEffect)((function(){i.offset.value=c}),[i,c]),i};function Xe(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.offset,o=void 0===i?1:i,r=t.onChange;return Qe(n,{offset:o}),Object(H.jsx)(je,{id:n,outputs:["output"],title:"Constant: ".concat(o),type:c,children:a&&Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{onChange:function(e){return r({offset:+e.target.value})},style:{width:"100%"},title:"Offset",type:"number",value:o})})})})}var Ke=c.a.memo(Xe);var Je=function(e,t){var n=t.delayTime,c=void 0===n?1:n,i=t.maxDelayTime,o=void 0===i?1:i,r=ue(e,(function(e){return e.createDelay(o)}),[o]);return Object(a.useEffect)((function(){r.delayTime.value=c}),[r,c]),r};function Ue(e){return Math.max(.001,Math.min(179.999,e))}function Ve(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.delayTime,o=void 0===i?1:i,r=t.maxDelayTime,u=void 0===r?1:r,s=t.onChange,l=Je(n,{delayTime:o,maxDelayTime:u});return Object(H.jsx)(je,{id:n,inputs:["input","delayTime"],outputs:["output"],title:"Delay: ".concat(o," s"),type:c,children:a&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{max:l.delayTime.maxValue,min:l.delayTime.minValue,step:Ue(u)/10,onChange:function(e){return s({delayTime:+e.target.value})},title:"Delay: ".concat(o," s"),type:"range",value:o})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{onChange:function(e){return s({maxDelayTime:+e.target.value})},max:0,min:180,title:"Max delay",type:"number",value:Ue(u)})})]})})}var Ye,Ze=c.a.memo(Ve);!function(e){e.Linear="Linear",e.Log="Log"}(Ye||(Ye={}));var $e=function(e){var t=e.onChange,n=e.type,c=e.value,i=Object(se.a)(e,["onChange","type","value"]),o=.001,r=c;n===Ye.Log&&(o=9/(1/o),r=function(e){return(Math.pow(10,e)-1)/9}(r));var u=Object(a.useCallback)((function(e){var a=+e.target.value;n===Ye.Log&&(a=function(e){return Math.log10(1+9*e)}(a)),t(a)}),[t,n]);return Object(H.jsx)("input",Object(Q.a)(Object(Q.a)({},i),{},{type:"range",max:1,min:0,step:o,onChange:u,value:r}))};var et=function(e,t){var n=t.gain,c=void 0===n?1:n,i=ue(e,(function(e){return e.createGain()}));return Object(a.useEffect)((function(){i.gain.setTargetAtTime(c,i.context.currentTime,.015)}),[i,c]),i};function tt(e){return 20*Math.log10(Math.abs(e))}function nt(e){var t=e.data,n=e.id,c=e.selected,i=e.type,o=t.delayTime,r=void 0===o?.2:o,u=t.feedback,s=void 0===u?.7:u,l=t.mix,d=void 0===l?.5:l,f=t.onChange,j=et("".concat(n,"_input"),{}),p=et("".concat(n,"_output"),{}),b=et("".concat(n,"_dry"),{gain:Math.cos(.5*d*Math.PI)}),m=et("".concat(n,"_wet"),{gain:Math.cos(.5*(1-d)*Math.PI)}),v=Je("".concat(n,"_delay"),{delayTime:r}),h=et("".concat(n,"_feedback"),{gain:s});return Object(a.useEffect)((function(){j.connect(b),b.connect(p)}),[b,j,p]),Object(a.useEffect)((function(){j.connect(v),v.connect(m),m.connect(p)}),[v,j,p,m]),Object(a.useEffect)((function(){m.connect(h),h.connect(v)}),[v,h,m]),ue(n,(function(){return{input:j,output:p}}),[j,p]),Object(H.jsx)(je,{id:n,inputs:["input"],outputs:["output"],title:"DelayEffect",type:i,children:c&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{max:"1",min:"0",onChange:function(e){return f({mix:+e.target.value})},step:"0.01",title:"Mix: ".concat(100*(1-d),"% dry / ").concat(100*d,"% wet"),type:"range",value:d})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{max:"1",min:"0",onChange:function(e){return f({delayTime:+e.target.value})},step:"0.01",title:"Delay: ".concat(r," s"),type:"range",value:r})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)($e,{onChange:function(e){return f({feedback:e})},title:"Feedback: ".concat(tt(s).toFixed(2)," dB"),type:Ye.Linear,value:s})})]})})}var at=c.a.memo(nt);var ct=function(e){return ue(e,(function(e){return e.destination}))};function it(e){var t=e.id,n=e.type;return ct(t),Object(H.jsx)(je,{id:t,inputs:["input"],type:n})}var ot=c.a.memo(it);var rt=function(e,t){var n=t.attack,c=void 0===n?.003:n,i=t.knee,o=void 0===i?30:i,r=t.ratio,u=void 0===r?12:r,s=t.release,l=void 0===s?.25:s,d=t.threshold,f=void 0===d?-24:d,j=ue(e,(function(e){return e.createDynamicsCompressor()}));return Object(a.useEffect)((function(){j.threshold.value=f}),[j,f]),Object(a.useEffect)((function(){j.knee.value=o}),[j,o]),Object(a.useEffect)((function(){j.ratio.value=u}),[j,u]),Object(a.useEffect)((function(){j.attack.value=c}),[j,c]),Object(a.useEffect)((function(){j.release.value=l}),[j,l]),j};function ut(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.attack,o=void 0===i?.003:i,r=t.knee,u=void 0===r?30:r,s=t.onChange,l=t.ratio,d=void 0===l?12:l,f=t.release,j=void 0===f?.25:f,p=t.threshold,b=void 0===p?-24:p;return rt(n,{attack:o,knee:u,ratio:d,release:j,threshold:b}),Object(H.jsx)(je,{id:n,inputs:["input","threshold","knee","ratio","attack","release"],outputs:["output"],type:c,children:a&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{min:"-100",max:"0",onChange:function(e){return s({threshold:+e.target.value})},step:"1",title:"Threshold: ".concat(b," dB"),type:"range",value:b})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{min:"0",max:"40",onChange:function(e){return s({knee:+e.target.value})},step:"1",title:"Knee: ".concat(u," dB"),type:"range",value:u})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{min:"1",max:"20",onChange:function(e){return s({ratio:+e.target.value})},step:"1",title:"Ratio: ".concat(d," dB"),type:"range",value:d})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{min:"0",max:"1",onChange:function(e){return s({attack:+e.target.value})},step:"0.001",title:"Attack: ".concat(o," s"),type:"range",value:o})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{min:"0",max:"1",onChange:function(e){return s({release:+e.target.value})},step:"0.001",title:"Release: ".concat(j," s"),type:"range",value:j})})]})})}var st=c.a.memo(ut),lt=[32,64,125,250,500,1e3,2e3,4e3,8e3,16e3],dt=lt,ft=Array(lt.length).fill(0);function jt(e){var t=Math.pow(2,e);return Math.sqrt(t)/(t-1)}function pt(e){var t=e.data,n=e.id,c=e.selected,i=e.type,o=t.bandwidth,r=void 0===o?1:o,u=t.gains,l=void 0===u?ft:u,d=t.onChange,f=et("".concat(n,"_input"),{}),j=et("".concat(n,"_output"),{}),p=dt.map((function(e,t,a){var c=0===t,i=t===a.length-1,o=!c&&!i?l[t]:0,u=c?"lowshelf":i?"highshelf":"peaking",s=jt(r);return Se("".concat(n,"_filter_").concat(e),{frequency:e,gain:o,type:u,Q:s})}));return Object(a.useEffect)((function(){p.concat(j).reduce((function(e,t){return e.connect(t)}),f)}),[f,j].concat(Object(V.a)(p))),ue(n,(function(){return{input:f,output:j}}),[f,j]),Object(a.useEffect)((function(){p.forEach((function(e,t){e.gain.setTargetAtTime(l[t],e.context.currentTime,.015)}))}),[p,l]),Object(a.useEffect)((function(){p.forEach((function(e){e.Q.setTargetAtTime(jt(r),e.context.currentTime,.015)}))}),[p,r]),Object(H.jsx)(je,{id:n,inputs:["input"],outputs:["output"],title:"EQ",type:i,children:c&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("div",{className:"equalizer",children:p.map((function(e,t){return Object(H.jsxs)("div",{children:[Object(H.jsx)("input",{max:12,min:-12,onChange:function(e){return d({gains:Object(s.a)(l,(function(n){n[t]=+e.target.value}))})},step:.1,title:"Gain: ".concat(l[t]," dB"),type:"range",value:l[t]}),(n=e.frequency.value,n>=1e3?"".concat(Math.floor(n/1e3),"k"):"".concat(n))]},t);var n}))})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{max:4,min:.5,step:.5,onChange:function(e){return d({bandwidth:+e.target.value})},title:"Bandwidth: ".concat(r," octaves"),type:"range",value:r})})]})})}var bt=c.a.memo(pt),mt=[{items:[{label:"Audio Buffer Source",node:"AudioBufferSource"},{label:"Gate",node:"Gate"},{label:"Keyboard",node:"Keyboard"},{label:"Metronome",node:"Metronome"},{label:"Noise",node:"Noise"},{label:"Oscillator",node:"Oscillator"},{label:"Oscillator Note",node:"OscillatorNote"}],label:"Sources"},{items:[{label:"Destination",node:"Destination"}],label:"Destinations"},{items:[{label:"Biquad Filter",node:"BiquadFilter"},{label:"Channel Merger",node:"ChannelMerger"},{label:"Channel Splitter",node:"ChannelSplitter"},{label:"Delay",node:"Delay"},{label:"Delay Effect",node:"DelayEffect"},{label:"Dynamics Compressor",node:"DynamicsCompressor"},{label:"Equalizer",node:"Equalizer"},{label:"Gain",node:"Gain"},{label:"Quantizer",node:"Quantizer"},{label:"Rectifier",node:"Rectifier"},{label:"Sample and Hold",node:"SampleAndHold"},{label:"Sign",node:"Sign"},{label:"Stereo Panner",node:"StereoPanner"},{label:"Transformer",node:"Transformer"},{label:"Wave Shaper",node:"WaveShaper"}],label:"Effects"},{items:[{label:"ADSR",node:"ADSR"},{label:"Constant Source",node:"ConstantSource"},{label:"Input Switch",node:"InputSwitch"},{label:"Output Switch",node:"OutputSwitch"}],label:"Controllers"},{items:[{label:"AND Gate",node:"AndGate"},{label:"Comparator",node:"Comparator"},{label:"NOT Gate",node:"NotGate"},{label:"OR Gate",node:"OrGate"},{label:"XOR Gate",node:"XorGate"}],label:"Logic"},{items:[{label:"Analyser",node:"Analyser"},{label:"Meter",node:"Meter"}],label:"Analysers"}];function vt(e){var t=e.addNode;return Object(H.jsx)("ul",{className:"contextMenu",children:mt.map((function(e){return Object(H.jsxs)("li",{children:[e.label,Object(H.jsx)("span",{children:"\u276f"}),e.items&&Object(H.jsx)("ul",{className:"contextMenu sub",children:e.items.map((function(e){return Object(H.jsx)("li",{onClick:function(){return t(e.node)},children:e.label},e.label)}))})]},e.label)}))})}var ht=c.a.memo(vt);function Ot(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.gain,o=void 0===i?1:i,r=t.onChange,u=t.type,s=void 0===u?Ye.Log:u,l="Gain: ".concat(tt(o).toFixed(2)," dB");return et(n,{gain:o}),Object(H.jsx)(je,{id:n,inputs:["input","gain"],outputs:["output"],title:l,type:c,children:a&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)($e,{onChange:function(e){return r({gain:e})},title:l,type:s,value:o})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("select",{onChange:function(e){return r({type:e.target.value})},title:"Type",value:s,children:[Object(H.jsx)("option",{value:Ye.Linear,children:Ye.Linear}),Object(H.jsx)("option",{value:Ye.Log,children:Ye.Log})]})})]})})}var xt=c.a.memo(Ot);function gt(e){var t=e.data,n=e.id,c=e.type,i=t.isOn,o=void 0!==i&&i,r=t.onChange,u=Qe(n,{});Object(a.useEffect)((function(){u.offset.setTargetAtTime(o?1:0,u.context.currentTime,.015)}),[u,o]);var s=Object(a.useCallback)((function(e){"repeat"in e&&e.repeat||r({isOn:!0})}),[r]),l=Object(a.useCallback)((function(){return r({isOn:!1})}),[r]);return Object(H.jsx)(je,{id:n,outputs:["output"],title:"Gate",type:c,children:Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("button",{onMouseDown:s,onMouseUp:l,onKeyDown:s,onKeyUp:l,children:["trigger ",o?"off":"on"]})})})}var yt=c.a.memo(gt);var Nt=function(e){var t=e.checked,n=e.labelOff,a=void 0===n?"off":n,c=e.labelOn,i=void 0===c?"on":c,o=e.onChange;return Object(H.jsxs)("label",{className:"toggle",children:[Object(H.jsx)("input",{checked:t,onChange:o,type:"checkbox"}),Object(H.jsx)("span",{className:"option",children:i}),Object(H.jsx)("span",{className:"option",children:a})]})};function Ct(e){var t=e.data,n=e.id,c=e.selected,i=e.type,o=t.input,r=void 0===o?"A":o,u=t.onChange,s=et("".concat(n,"_output"),{}),l=et("".concat(n,"_inputA"),{}),d=et("".concat(n,"_inputB"),{});Object(a.useEffect)((function(){l.connect(s),d.connect(s)}),[l,d,s]);var f=Object(a.useCallback)((function(){return u({input:"A"===r?"B":"A"})}),[u,r]);return Object(a.useEffect)((function(){"A"===r?(l.gain.setTargetAtTime(1,l.context.currentTime,.015),d.gain.setTargetAtTime(0,d.context.currentTime,.015)):(l.gain.setTargetAtTime(0,l.context.currentTime,.015),d.gain.setTargetAtTime(1,d.context.currentTime,.015))}),[r,l,d]),ue(n,(function(){return{input:void 0,A:l,B:d,output:s}}),[l,d,s]),Object(H.jsx)(je,{id:n,inputs:["A","B"],outputs:["output"],title:"Input: ".concat(r),type:i,children:c&&Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)(Nt,{checked:"A"===r,labelOff:"B",labelOn:"A",onChange:f})})})})}var kt,wt,Tt=c.a.memo(Ct),_t=["C","C\u266f","D","D\u266f","E","F","F\u266f","G","G\u266f","A","A\u266f","B"];function Mt(e){if(e<0||e>11)throw new RangeError("Twelfth must be between 0 and 11, is ".concat(e))}function Et(e,t){!function(e){if(e<0||e>10)throw new RangeError("Octave must be between 0 and 10, is ".concat(e))}(e),Mt(t);return 16.3516*Math.pow(2,e+t/12)}function St(e){return Mt(e),_t[e]}!function(e){e[e.Whole="\ueca2"]="Whole",e[e.Half="\ueca3"]="Half",e[e.Quarter="\ueca5"]="Quarter",e[e.Sixteenth="\ueca9"]="Sixteenth",e[e.Eight="\ueca7"]="Eight"}(kt||(kt={})),function(e){e[e.Whole=1]="Whole",e[e.Half=2]="Half",e[e.Quarter=4]="Quarter",e[e.Eight=8]="Eight",e[e.Sixteenth=16]="Sixteenth"}(wt||(wt={}));var At={display:"inline-block",textAlign:"center",width:"0.7em"},Dt=Object(Q.a)(Object(Q.a)({},At),{},{verticalAlign:"sub"}),Rt=Object(Q.a)(Object(Q.a)({},At),{},{transform:"translateX(-100%)",verticalAlign:"super"});function Ft(e){var t=e.detailed,n=void 0!==t&&t,a=e.detune,c=void 0===a?0:a,i=e.octave,o=e.twelfth,u=St(o).split(""),s=Object(r.a)(u,2),l=s[0],d=s[1],f=Et(i,o),j=f*Math.pow(2,c/1200);return Object(H.jsxs)("span",{children:[l,Object(H.jsx)("small",{style:Dt,children:i}),d&&Object(H.jsx)("small",{style:Rt,children:d}),n&&Object(H.jsxs)(H.Fragment,{children:["\xa0",Object(H.jsxs)("small",{children:["(",f.toFixed(2)," Hz",0!==c&&Object(H.jsxs)(H.Fragment,{children:[" \u2192 ",j.toFixed(2)," Hz"]}),")"]})]})]})}var Bt=c.a.memo(Ft),qt=(n(53),[16,28,40,64,88]);function Wt(e){var t=e.data,n=e.id,c=e.type,i=t.keys,o=void 0===i?16:i,r=t.octave,u=void 0===r?2:r,s=t.onChange,l=Qe("".concat(n,"_gate"),{}),d=Qe("".concat(n,"_frequency"),{}),f=Object(a.useCallback)((function(e,t){var n=d.context,a=Et(e,t);d.offset.setTargetAtTime(a,n.currentTime,.015)}),[d]),j=Object(a.useCallback)((function(){l.offset.value=1}),[l]),p=Object(a.useCallback)((function(){l.offset.value=0}),[l]);return ue(n,(function(){return{frequency:d,gate:l,input:void 0,output:void 0}}),[d,l]),Object(H.jsx)(je,{id:n,outputs:["frequency","gate"],title:"Keyboard",type:c,children:Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("div",{className:"keyboard",onMouseDown:j,onMouseLeave:p,onMouseUp:p,children:Array(o).fill(null).map((function(e,t){var n=((t+-3)%12+12)%12,a=u+Math.floor((t+-3)/12),c=[1,3,6,8,10].includes(n)?"key key-black":"key key-white";return Object(H.jsx)("button",{className:c,onMouseEnter:function(){return f(a,n)},children:Object(H.jsx)(Bt,{octave:a,twelfth:n})},"".concat(a,"_").concat(n))}))})}),Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)("input",{min:1,max:6,onChange:function(e){return s({octave:+e.target.value})},style:{width:"50%"},title:"Octave",type:"number",value:u}),Object(H.jsx)("select",{onChange:function(e){return s({keys:+e.target.value})},style:{width:"50%"},title:"Keys",value:o,children:qt.map((function(e){return Object(H.jsx)("option",{value:e,children:e},e)}))})]})]})})}var Pt,Lt=c.a.memo(Wt);var It=null!==(Pt=window.devicePixelRatio)&&void 0!==Pt?Pt:1;function Gt(e,t){e.setTransform(It,0,0,It,0,0),e.fillStyle="#000000",e.font="10px Arial",e.strokeStyle="#000000",e.textAlign="right",e.textBaseline="middle",e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore(),Array(55).fill(void 0).forEach((function(t,n){var a=[0,6,12,18,30,42,54].includes(n),c=a?1:.5,i=a?6:3,o="".concat(6-n),r=2*n+5.5,u=17+(a?0:3),s=r;a&&e.fillText(o,15,s),e.lineWidth=c,e.fillRect(0+u,r+0,i,c)})),t.forEach((function(t,n){Array(55).fill(void 0).forEach((function(a,c){var i,o=6-c,r=Math.min(Math.max(120*(i=Math.max(0,-o/10),Math.log10(1+9*i)),0),120).toFixed(0),u=tt(t)>=o?"50%":"0%";e.fillStyle="hsl(".concat(r,", 50%, ").concat(u,")"),e.fillRect(27*(n+1)-2,2*c+5,25,2)}))}))}function Ht(e){var t=e.id,n=e.type,c=Object(a.useRef)(null),i=Object(a.useRef)([]),o=Object(a.useState)(1),u=Object(r.a)(o,2),s=u[0],l=u[1],d=27*(s+1),f=ve(t,"meter-processor",{numberOfOutputs:0}),j=Object(a.useCallback)((function(e){var t=e.data;"channels"===t.type&&t.payload.channels!==s&&l(t.payload.channels),"level"===t.type&&(i.current[t.payload.channel]=t.payload.level)}),[s]);return Object(a.useEffect)((function(){f.port.onmessage=j}),[f,j]),xe(Object(a.useCallback)((function(){var e=c.current,t=null===e||void 0===e?void 0:e.getContext("2d");e&&t&&Gt(t,i.current.slice(0,s))}),[s])),Object(H.jsx)(je,{id:t,inputs:["input"],title:"Meter",type:n,children:Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("canvas",{ref:c,width:It*d,height:120*It,style:{height:120,width:d}})})})})}var zt=c.a.memo(Ht),Qt=n(6),Xt=(n(54),{fontFamily:"Bravura",fontSize:20,height:32,lineHeight:2,padding:0,width:32});function Kt(e){var t=e.data,n=e.id,c=e.selected,i=e.type,o=t.beatsPerMeasure,r=void 0===o?4:o,u=t.beatsPerMinute,s=void 0===u?120:u,l=t.notes,d=void 0===l?[wt.Quarter]:l,f=t.onChange,j=ue(n,(function(e){var t,n=60/s,a=n*r,c=e.createBuffer(1,e.sampleRate*a,e.sampleRate),i=c.getChannelData(0),o=Object(Qt.a)(d);try{for(o.s();!(t=o.n()).done;)for(var u=t.value,l=n*wt.Quarter/u,f=e.sampleRate*l,j=880*u/wt.Quarter,p=r*u/wt.Quarter,b=0,m=1,v=0;v<p;v++)for(var h=0;h<f;h++){var O=0===v?1.33*j:j,x=h+Math.floor(v*f),g=1/d.length,y=Math.min(g,h/(.015*e.sampleRate));i[x]+=Math.sin(b)*m,b+=2*Math.PI*O/e.sampleRate,m=Math.max(y-h/f,0)}}catch(C){o.e(C)}finally{o.f()}var N=e.createBufferSource();return N.buffer=c,N.loop=!0,N.loopEnd=a,N}),[r,d.length,s]);Object(a.useEffect)((function(){return j.start(),function(){return j.stop()}}),[j]);var p=Object(a.useCallback)((function(e){return f({notes:d.includes(e)?d.filter((function(t){return t!==e})):d.concat(e)})}),[d,f]);return Object(H.jsx)(je,{id:n,outputs:["output"],title:"Metronome: ".concat(s," BPM"),type:i,children:c&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)("input",{max:208,min:40,onChange:function(e){return f({beatsPerMinute:+e.target.value})},title:"Beats Per Minute",type:"number",value:s}),Object(H.jsx)("input",{max:8,min:1,onChange:function(e){return f({beatsPerMeasure:+e.target.value})},title:"Beats Per Measure",type:"number",value:r})]}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("span",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[wt.Whole,wt.Half,wt.Quarter,wt.Eight,wt.Sixteenth].map((function(e){return Object(H.jsx)("button",{onClick:function(){return p(e)},style:Object(Q.a)(Object(Q.a)({},Xt),{},{color:d.includes(e)?"#0d0":"#d00"}),title:"".concat(wt[e]," note"),children:kt[wt[e]]},e)}))})})]})})}var Jt,Ut=c.a.memo(Kt);function Vt(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.onChange,o=t.type,r=void 0===o?Jt.White:o;return ve(n,"noise-processor",{numberOfInputs:0,processorOptions:{type:r}},[r]),Object(H.jsx)(je,{id:n,outputs:["output"],title:"Noise: ".concat(r),type:c,children:a&&Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("select",{onChange:function(e){return i({type:e.target.value})},title:"Type",value:r,children:[Object(H.jsx)("option",{value:Jt.White,children:Jt.White}),Object(H.jsx)("option",{value:Jt.Pink,children:Jt.Pink}),Object(H.jsx)("option",{value:Jt.Brown,children:Jt.Brown})]})})})})}!function(e){e.Brown="Brown",e.Pink="Pink",e.White="White"}(Jt||(Jt={}));var Yt=c.a.memo(Vt);function Zt(e){var t=e.id,n=e.type;return ve(t,"not-gate-processor"),Object(H.jsx)(je,{id:t,inputs:["input"],outputs:["output"],title:"Gate: NOT",type:n})}var $t=c.a.memo(Zt);function en(e){var t=e.id,n=e.type;return ve(t,"or-gate-processor",{numberOfInputs:2}),Object(H.jsx)(je,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: OR",type:n})}var tn=c.a.memo(en);var nn=function(e,t){var n=t.detune,c=void 0===n?0:n,i=t.frequency,o=void 0===i?440:i,r=t.type,u=void 0===r?"sine":r,s=ue(e,(function(e){return e.createOscillator()}));return Object(a.useEffect)((function(){return s.start(),function(){return s.stop()}}),[s]),Object(a.useEffect)((function(){s.detune.value=c}),[s,c]),Object(a.useEffect)((function(){s.frequency.value=o}),[s,o]),Object(a.useEffect)((function(){s.type=u}),[s,u]),s};function an(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.detune,o=void 0===i?0:i,r=t.frequency,u=void 0===r?440:r,s=t.onChange,l=t.type,d=void 0===l?"sine":l,f=u*Math.pow(2,o/1200);return nn(n,{detune:o,frequency:u,type:d}),Object(H.jsx)(je,{id:n,inputs:["detune","frequency"],outputs:["output"],title:"".concat(f.toFixed(2)," Hz ").concat(d),type:c,children:a&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{max:100,min:-100,onChange:function(e){return s({detune:+e.target.value})},step:1,style:{width:"100%"},title:"Detune: ".concat(o," cents"),type:"range",value:o})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{max:2e4,min:0,onChange:function(e){return s({frequency:+e.target.value})},title:"Frequency",type:"number",value:u})}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("select",{onChange:function(e){return s({type:e.target.value})},title:"Wave",value:d,children:[Object(H.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(H.jsx)("option",{value:"square",children:"square"}),Object(H.jsx)("option",{value:"sine",children:"sine"}),Object(H.jsx)("option",{value:"triangle",children:"triangle"})]})})]})})}var cn=c.a.memo(an);function on(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.detune,o=void 0===i?0:i,r=t.octave,u=void 0===r?4:r,s=t.onChange,l=t.twelfth,d=void 0===l?0:l,f=t.type,j=void 0===f?"sine":f,p=Et(u,d);return nn(n,{detune:o,frequency:p,type:j}),Object(H.jsx)(je,{id:n,inputs:["detune"],outputs:["output"],title:Object(H.jsx)(Bt,{detailed:!0,detune:o,octave:u,twelfth:d}),type:c,children:a&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{max:100,min:-100,onChange:function(e){return s({detune:+e.target.value})},step:1,style:{width:"100%"},title:"Detune: ".concat(o," cents"),type:"range",value:o})}),Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)("select",{onChange:function(e){return s({twelfth:+e.target.value})},style:{width:"50%"},title:"Note",value:d,children:Array(12).fill(0).map((function(e,t){return Object(H.jsx)("option",{value:t,children:St(t)},t)}))}),Object(H.jsx)("select",{onChange:function(e){return s({octave:+e.target.value})},style:{width:"50%"},title:"Octave",value:u,children:Array(11).fill(0).map((function(e,t){return Object(H.jsx)("option",{value:t,children:t},t)}))})]}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("select",{onChange:function(e){return s({type:e.target.value})},style:{width:"100%"},title:"Wave",value:j,children:[Object(H.jsx)("option",{value:"sawtooth",children:"sawtooth"}),Object(H.jsx)("option",{value:"square",children:"square"}),Object(H.jsx)("option",{value:"sine",children:"sine"}),Object(H.jsx)("option",{value:"triangle",children:"triangle"})]})})]})})}var rn=c.a.memo(on);function un(e){var t=e.data,n=e.id,c=e.selected,i=e.type,o=t.onChange,r=t.output,u=void 0===r?"A":r,s=et("".concat(n,"_input"),{}),l=et("".concat(n,"_outputA"),{}),d=et("".concat(n,"_outputB"),{});Object(a.useEffect)((function(){s.connect(l),s.connect(d)}),[s,l,d]);var f=Object(a.useCallback)((function(){return o({output:"A"===u?"B":"A"})}),[o,u]);return Object(a.useEffect)((function(){"A"===u?(l.gain.setTargetAtTime(1,l.context.currentTime,.015),d.gain.setTargetAtTime(0,d.context.currentTime,.015)):(l.gain.setTargetAtTime(0,l.context.currentTime,.015),d.gain.setTargetAtTime(1,d.context.currentTime,.015))}),[u,l,d]),ue(n,(function(){return{input:s,A:l,B:d,output:void 0}}),[s,l,d]),Object(H.jsx)(je,{id:n,inputs:["input"],outputs:["A","B"],title:"Output: ".concat(u),type:i,children:c&&Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)(Nt,{checked:"A"===u,labelOff:"B",labelOn:"A",onChange:f})})})})}var sn=c.a.memo(un);function ln(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.levels,o=void 0===i?256:i,r=t.max,u=void 0===r?1:r,s=t.min,l=void 0===s?-1:s,d=t.onChange;return ve(n,"quantizer-processor",{processorOptions:{levels:o,max:u,min:l}},[o,u,l]),Object(H.jsx)(je,{id:n,inputs:["input"],outputs:["output"],title:"Quantizer",type:c,children:a&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsx)("div",{className:"customNode_item",style:{width:138},children:Object(H.jsx)("input",{onChange:function(e){return d({levels:+e.target.value})},step:1,title:"Levels",type:"number",value:o})}),Object(H.jsxs)("div",{className:"customNode_item",style:{width:138},children:[Object(H.jsx)("input",{onChange:function(e){return d({min:+e.target.value})},step:1,style:{width:"50%"},title:"Min",type:"number",value:l}),Object(H.jsx)("input",{onChange:function(e){return d({max:+e.target.value})},style:{width:"50%"},step:1,title:"Max>",type:"number",value:u})]})]})})}var dn,fn=c.a.memo(ln);function jn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.mode,o=void 0===i?dn.HalfWave:i,r=t.onChange;return ve(n,"rectifier-processor",{processorOptions:{mode:o}},[o]),Object(H.jsx)(je,{id:n,inputs:["input"],outputs:["output"],title:"Rectifier",type:c,children:a&&Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("select",{onChange:function(e){return r({mode:e.target.value})},title:"Type",value:o,children:[Object(H.jsx)("option",{value:dn.FullWave,children:dn.FullWave}),Object(H.jsx)("option",{value:dn.HalfWave,children:dn.HalfWave})]})})})})}!function(e){e.FullWave="Full-wave",e.HalfWave="Half-wave"}(dn||(dn={}));var pn,bn=c.a.memo(jn);function mn(e){var t=e.id,n=e.type,a=ve("".concat(t,"_worklet"),"sample-and-hold-processor");return ue(t,(function(){var e;return e={},Object(Z.a)(e,pn.HoldTime,a.parameters.get(pn.HoldTime)),Object(Z.a)(e,"input",a),Object(Z.a)(e,"output",a),e}),[a]),Object(H.jsx)(je,{id:t,inputs:["input",pn.HoldTime],outputs:["output"],title:"Sample/Hold",type:n})}function vn(e){var t=e.id,n=e.type;return ve(t,"sign-processor"),Object(H.jsx)(je,{id:t,inputs:["input"],outputs:["output"],title:"Sign",type:n})}!function(e){e.HoldTime="holdTime"}(pn||(pn={}));var hn=function(e,t){var n=t.pan,c=void 0===n?0:n,i=ue(e,(function(e){return e.createStereoPanner()}));return Object(a.useEffect)((function(){i.pan.value=c}),[i,c]),i};function On(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.pan,o=void 0===i?0:i,r=t.onChange,u="Stereo: ".concat(Math.abs(100*o).toFixed(0),"% ").concat(o>0?"Right":o<0?"Left":"");return hn(n,{pan:o}),Object(H.jsx)(je,{id:n,inputs:["input","pan"],outputs:["output"],title:u,type:c,children:a&&Object(H.jsx)("div",{className:"customNode_editor nodrag",children:Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsx)("input",{max:"1",min:"-1",onChange:function(e){return r({pan:+e.target.value})},step:"0.01",title:u,type:"range",value:o})})})})}var xn={width:50};function gn(e){var t=e.data,n=e.id,a=e.selected,c=e.type,i=t.inputMax,o=void 0===i?1:i,r=t.inputMin,u=void 0===r?-1:r,s=t.onChange,l=t.outputMax,d=void 0===l?1:l,f=t.outputMin,j=void 0===f?0:f;return ve(n,"transformer-processor",{processorOptions:{inputMin:u,inputMax:o,outputMin:j,outputMax:d}},[u,o,j,d]),Object(H.jsx)(je,{id:n,inputs:["input"],outputs:["output"],title:"Transformer",type:c,children:a&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)("input",{onChange:function(e){return s({inputMin:+e.target.value})},style:xn,title:"Input min",type:"number",value:u}),Object(H.jsx)("span",{children:"\u2192"}),Object(H.jsx)("input",{onChange:function(e){return s({outputMin:+e.target.value})},style:xn,title:"Output min",type:"number",value:j})]}),Object(H.jsxs)("div",{className:"customNode_item",children:[Object(H.jsx)("input",{onChange:function(e){return s({inputMax:+e.target.value})},style:xn,title:"Input max",type:"number",value:o}),Object(H.jsx)("span",{children:"\u2192"}),Object(H.jsx)("input",{onChange:function(e){return s({outputMax:+e.target.value})},style:xn,title:"Output max",type:"number",value:d})]})]})})}var yn=function(e,t){var n=t.curve,c=void 0===n?null:n,i=t.oversample,o=void 0===i?"none":i,r=ue(e,(function(e){return e.createWaveShaper()}));return Object(a.useEffect)((function(){r.curve=c}),[r,c]),Object(a.useEffect)((function(){r.oversample=o}),[r,o]),r};function Nn(e){var t,n=e.data,c=e.id,i=e.selected,o=e.type,u=n.onChange,s=n.oversample,l=Object(a.useState)(null!==(t=n.curveFn)&&void 0!==t?t:"const k = 50;\nconst samples = curve.length;\nconst deg = Math.PI / 180;\nfor (let i = 0; i < samples; i++) {\n  const x = (i * 2) / samples - 1;\n  curve[i] = ((3 + k) * x * 20 * deg) / (Math.PI + k * Math.abs(x));\n}\nreturn curve;"),d=Object(r.a)(l,2),f=d[0],p=d[1],b=Object(a.useState)(f),m=Object(r.a)(b,2),v=m[0],h=m[1],O=Object(a.useContext)(j),x=Object(a.useMemo)((function(){var e=new Float32Array(O.sampleRate);return new Function("curve",v)(e)}),[O.sampleRate,v]);yn(c,{curve:x,oversample:s});var g=Object(a.useCallback)((function(){try{new Function("curve",f)(new Float32Array(O.sampleRate)),h(f),u({curveFn:f})}catch(e){console.error(e)}}),[O.sampleRate,f,u]);return Object(H.jsx)(je,{id:c,inputs:["input"],outputs:["output"],type:o,children:i&&Object(H.jsxs)("div",{className:"customNode_editor nodrag",children:[Object(H.jsxs)("div",{className:"customNode_item",style:{flexWrap:"wrap"},children:[Object(H.jsx)("textarea",{onChange:function(e){return p(e.target.value)},rows:8,style:{width:"100%"},title:"Curve function",value:f}),Object(H.jsx)("button",{onClick:g,children:"save"})]}),Object(H.jsx)("div",{className:"customNode_item",children:Object(H.jsxs)("select",{onChange:function(e){return u({oversample:e.target.value})},title:"Oversample",value:s,children:[Object(H.jsx)("option",{value:"none",children:"none"}),Object(H.jsx)("option",{value:"2x",children:"2x"}),Object(H.jsx)("option",{value:"4x",children:"4x"})]})})]})})}function Cn(e){var t=e.id,n=e.type;return ve(t,"xor-gate-processor",{numberOfInputs:2}),Object(H.jsx)(je,{id:t,inputs:["input-0","input-1"],outputs:["output"],title:"Gate: XOR",type:n})}var kn={ADSR:Oe,Analyser:we,AndGate:_e,AudioBufferSource:Ee,BiquadFilter:Fe,ChannelMerger:Pe,ChannelSplitter:Ge,Comparator:ze,ConstantSource:Ke,Delay:Ze,DelayEffect:at,Destination:ot,DynamicsCompressor:st,Equalizer:bt,Gain:xt,Gate:yt,InputSwitch:Tt,Keyboard:Lt,Meter:zt,Metronome:Ut,Noise:Yt,NotGate:$t,OrGate:tn,Oscillator:cn,OscillatorNote:rn,OutputSwitch:sn,Quantizer:fn,Rectifier:bn,SampleAndHold:c.a.memo(mn),Sign:c.a.memo(vn),StereoPanner:c.a.memo(On),Transformer:c.a.memo(gn),WaveShaper:c.a.memo(Nn),XorGate:c.a.memo(Cn)};function wn(e){return e.source?Object.assign({},e,{style:{stroke:"#".concat(e.source.substr(-6))}}):e}function Tn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=Object(f.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.filter(u.h).reduce((function(e,t){return e[t.source]=!0,e[t.target]=!0,e}),{});case 1:if(!Object.keys(a).length){e.next=7;break}return Object.keys(n).forEach((function(e){delete a[e]})),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mn=10;function En(e){return Math.floor(e/Mn)*Mn}function Sn(){var e=de(),t=e.elements,n=e.onChangeElementFactory,c=e.setElements,i=e.setTransform,o=e.transform,l=K(),j=re().nodes,p=Object(a.useState)(null),b=Object(r.a)(p,2),m=b[0],v=b[1],h=function(){var e=re().getNode;return Object(a.useCallback)((function(t){return ae(t,e)}),[e])}(),O=function(){var e=re().getNode;return Object(a.useCallback)((function(t){return ce(t,e)}),[e])}(),x=function(){var e=re().getNode;return Object(a.useCallback)((function(t){return $(e(t))}),[e])}(),g=Object(a.useCallback)(function(){var e=Object(f.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setTransform(o),c(Object(s.a)((function(e){e.filter(u.i).forEach((function(e){e.data.onChange=n(e.id)}))}))),e.next=4,Tn(t,j);case 4:t.filter(u.h).forEach((function(e){return h(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),y=Object(a.useCallback)((function(e){i(e)}),[i]),N=Object(a.useCallback)((function(e,t){v(t)}),[]),C=Object(a.useCallback)((function(e){return v(null)}),[]),k=Object(a.useCallback)((function(e){c((function(t){return Object(u.f)(wn(e),t)})),h(e)}),[h,c]),w=Object(a.useCallback)((function(e){e.filter(u.h).forEach((function(e){return O(e)})),e.filter(u.i).forEach((function(e){return x(e.id)})),c((function(t){return Object(u.j)(e,t)}))}),[O,x,c]),T=Object(a.useCallback)((function(e,t){O(e),c((function(t){return Object(u.j)([e],t)})),c((function(e){return Object(u.f)(wn(t),e)})),h(t)}),[O,h,c]),_=Object(a.useCallback)((function(e,t){c(Object(s.a)((function(e){var n=e.filter(u.i).find((function(e){return e.id===t.id}));n&&(n.position={x:En(t.position.x),y:En(t.position.y)})})))}),[c]),M=Object(a.useCallback)((function(e){var t="".concat(e,"-").concat(Object(Y.a)()),a={id:t,data:{onChange:n(t)},type:e,position:{x:En((l.getRect().left-o.x)/o.zoom),y:En((l.getRect().top-o.y)/o.zoom)}};c((function(e){return[].concat(Object(V.a)(e),[a])})),l.hide()}),[l,n,c,o]),E=Object(a.useCallback)((function(){l.hide()}),[l]),S=Object(a.useCallback)((function(e){e.preventDefault(),l.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),l.show(Object(H.jsx)(ht,{addNode:M}))}),[M,l]);return Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)(u.g,{"data-connecting-handletype":m?m.handleType:void 0,defaultPosition:[o.x,o.y],defaultZoom:o.zoom,elements:t,nodeTypes:kn,onConnect:k,onConnectStart:N,onConnectStop:C,onEdgeUpdate:T,onElementsRemove:w,onLoad:g,onMoveEnd:y,onNodeDragStop:_,onPaneClick:E,onPaneContextMenu:S,onlyRenderVisibleElements:!1,selectNodesOnDrag:!1,snapToGrid:!0,snapGrid:[Mn,Mn],style:{zIndex:0},children:[Object(H.jsx)(u.a,{gap:Mn}),Object(H.jsx)(u.b,{})]})})}var An=c.a.memo(Sn),Dn={fontSize:12,height:"100%",resize:"none",width:"100%"},Rn={display:"flex",position:"absolute",right:"100%",top:-10,transform:"rotate(-90deg)",transformOrigin:"bottom right"},Fn=function(){return{id:Object(Y.a)(),elements:[],transform:{x:0,y:0,zoom:1}}};var Bn=function(){var e=de(),t=e.elements,n=e.id,c=e.setElements,i=e.setId,o=e.setTransform,u=e.transform,s=Object(a.useState)(!1),l=Object(r.a)(s,2),d=l[0],f=l[1],j=Object(a.useMemo)((function(){return function(e){return{height:"100%",padding:10,position:"absolute",right:0,top:0,transform:e?"translateX(0)":"translateX(100%)",transition:"transform 0.4s ease",width:400}}(d)}),[d]);Object(a.useEffect)((function(){var e=atob(window.location.hash.substr(1));try{var t=JSON.parse(e),n=t.elements,a=t.id,r=t.transform;c(n),i(null!==a&&void 0!==a?a:Object(Y.a)()),o(r)}catch(u){console.error(u)}}),[c,i,o]),Object(a.useEffect)((function(){window.location.hash=btoa(JSON.stringify({elements:t.map((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{__rf:void 0})})),id:n,transform:u}))}),[t,n,u]);var p=Object(a.useCallback)((function(e){try{var t=JSON.parse(e.target.value),n=t.elements,a=t.id,r=t.transform;c(n),i(null!==a&&void 0!==a?a:Object(Y.a)()),o(r)}catch(e){console.error(e)}}),[c,i,o]),b=Object(a.useCallback)((function(){var e=Fn();c(e.elements),i(e.id),o(e.transform)}),[c,i,o]),m=Object(a.useCallback)((function(){return f((function(e){return!e}))}),[]);return Object(H.jsxs)("div",{style:j,children:[Object(H.jsx)("textarea",{onChange:p,style:Dn,value:JSON.stringify({elements:t.map((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{__rf:void 0})})),id:n,transform:u},null,2)}),Object(H.jsxs)("div",{style:Rn,children:[Object(H.jsx)("button",{onClick:b,style:{marginRight:10},children:"clear"}),Object(H.jsx)("button",{onClick:m,children:d?"hide":"show"})]})]})};var qn=function(){var e=Object(a.useMemo)(Fn,[]),t=Object(a.useState)(e.id),n=Object(r.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(e.elements),l=Object(r.a)(o,2),d=l[0],f=l[1],j=Object(a.useState)(e.transform),p=Object(r.a)(j,2),b=p[0],m=p[1],v={elements:d,id:c,onChangeElementFactory:Object(a.useCallback)((function(e){return function(t){f(Object(s.a)((function(n){var a=n.filter(u.i).find((function(t){return t.id===e}));a&&Object.keys(t).forEach((function(e){return a.data[e]=t[e]}))})))}}),[f]),setElements:f,setId:i,setTransform:m,transform:b};return Object(H.jsx)(le.Provider,{value:v,children:Object(H.jsx)(z,{children:Object(H.jsx)(u.e,{children:Object(H.jsx)(ee,{children:Object(H.jsx)(U,{children:Object(H.jsxs)("div",{style:{alignItems:"stretch",display:"flex",height:"100vh"},children:[Object(H.jsx)(An,{},v.id),Object(H.jsx)(Bn,{})]})})})})})})},Wn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};o.a.render(Object(H.jsx)(c.a.StrictMode,{children:Object(H.jsx)(qn,{})}),document.getElementById("root")),Wn()}},[[55,1,2]]]);
//# sourceMappingURL=main.00f8a516.chunk.js.map